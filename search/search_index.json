{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Introdu\u00e7\u00e3o","text":""},{"location":"#introducao","title":"Introdu\u00e7\u00e3o","text":"<p>O objetivo deste documento \u00e9 descrever o processo de integra\u00e7\u00e3o com o componente  DTEFMobile, que disponibiliza uma camada de integra\u00e7\u00e3o Mobile Android, atrav\u00e9s de  um conjunto de funcionalidades, que est\u00e3o disponibilizadas como um SDK de  integra\u00e7\u00e3o.</p> <p>As funcionalidades e procedimentos descritos, s\u00e3o compat\u00edveis com vers\u00e3o igual ou  superior do dtefmobile-2.4.0.aar.</p> <p>Para auxiliar no processo de aprendizagem, disponibilizamos o App DTEFMobile  Sample, que demonstra o uso das interfaces apresentadas nesse documento, de forma  simples e funcional.</p> <p> </p>"},{"location":"pages/HistoricoRevisoes/","title":"Historico de revis\u00f5es","text":""},{"location":"pages/HistoricoRevisoes/#historico-de-revisoes","title":"Hist\u00f3rico de Revis\u00f5es","text":"Vers\u00e3o Data Descri\u00e7\u00e3o das altera\u00e7\u00f5es 2.8 19/03/25 \u2022 Inclus\u00e3o de par\u00e2metros do Pix Full e indica\u00e7\u00e3o dos par\u00e2metros que est\u00e3o ainda em desenvolvimento, apenas a documenta\u00e7\u00e3o foi disponibilizada.\u2022 Inclus\u00e3o de JSON_INTEGRACAO_QR em ParameterType (input)\u2022 Inclus\u00e3o de CODIGO_PSP, NOME_PSP, METODO_PAGAMENTO_QR, END_TO_END_ID, JSON_DADOS_ADICIONAIS_QR e JSON_INTEGRACAO_QR em ParameterType (output). 2.7 17/01/25 \u2022 Inclus\u00e3o de NUMERO_CARTAO_AUTOMACAO, VALIDADE_CARTAO_AUTOMACAO, CODIGO_BANDEIRA_AUTOMACAO, CODIGO_PLANO_AUTOMACAO e PLANOS_PAGAMENTO em ParameterType, para transa\u00e7\u00f5es com a rede Calcard.\u2022 Inclus\u00e3o do SmartPOS DX8000 e Pinpad USB PPC-940 em Terminais homologados. 2.6 03/09/24 \u2022 Inclus\u00e3o do Pinpad USB LANE-3600 em Terminais homologados. 2.5 19/07/24 \u2022 Inclus\u00e3o de DADOS_SPLIT em ParameterType. 2.4 21/06/24 \u2022 Inclus\u00e3o de VALOR_ENTRADA, VALOR_PARCELA1, DATA_PARCELA1 e DATA_PRE_DATADO em ParameterType.\u2022 Inclus\u00e3o de CDC, WITH_INSTALMENT_CASH e WITHOUT_INSTALMENT_CASH em FinancialType.\u2022 Atualiza\u00e7\u00e3o de TransactionBuilder.\u2022 Inclus\u00e3o do terminal GPOS780 e totem SK-210 em Terminais homologados. 2.3 26/03/24 \u2022 Inclus\u00e3o da p\u00e1gina \"Terminais homologados\" 2.2 26/02/24 \u2022 Inclus\u00e3o de par\u00e2metros de output em ParameterType, inicialmente com CARTAO_PREPAGO e NSU_REDE_ADICIONAL.\u2022 Inclus\u00e3o de CODIGO_PRODUTO_CIELO, TIPO_TRANSACAO_CANCELAMENTO e TRATAR_DESFAZIMENTO em ParameterType - Input.\u2022 ResultTransaction renomeado para TransactionResult. 2.1 20/10/23 \u2022 Inclus\u00e3o de LISTA_PRODUTOS_ABASTECIMENTO em ParameterType.\u2022 Inclus\u00e3o de setCurrentTransactionInfo em UICallback. 2.0 10/07/23 \u2022 Inclus\u00e3o dos par\u00e2metros para transa\u00e7\u00e3o de frota na especifica\u00e7\u00e3o do ParameterType 1.9 05/05/23 \u2022 Inclus\u00e3o do InputModel getAmountDecimals e do InputModel.Type AMOUNT_DECIMALS 1.8 21/03/23 \u2022 Ajustes no descritivo sobre o DTEFAppSample 1.7 03/10/22 \u2022 Atualizada a vers\u00e3o do PPComp para o Sunmi P2 1.6 28/01/22 \u2022 Adicionadas depend\u00eancias do SUNMI P2\u2022 Suporte ao Stone DTEFMobile 2.6.0 1.5 30/06/21 \u2022 Atualiza\u00e7\u00e3o da BC Ingenico A8\u2022 Suporte Stone DTEFMobile 2.4.0 1.4 16/06/21 \u2022 Suporte a captura da data da transa\u00e7\u00e3o original na transa\u00e7\u00e3o de reimpress\u00e3o e cancelamento\u2022 Detalhamento dos m\u00e9todos TransactionBuilder\u2022 Detalhamento do Enum FinancialType\u2022 Atualiza\u00e7\u00e3o da interface Info 1.3 31/12/20 Callback onShowQrCode para pagamentos com QrLinx / PIX 1.2 03/04/20 Observa\u00e7\u00e3o: confirmTransaction e undoTransaction 1.1 16/03/20 Informa\u00e7\u00e3o sobre o uso de Pinpad Bluetooth pareado ao SmartphoneCorre\u00e7\u00e3o na defini\u00e7\u00e3o de CARD_DATE e DATE do InputType, utilizando no callback onInput, em rela\u00e7\u00e3o ao retorno de uma captura sem dado. 1.0 04/03/20 Cria\u00e7\u00e3o do documento"},{"location":"pages/PinpadBluetooth/","title":"Pinpad Bluetooth","text":""},{"location":"pages/PinpadBluetooth/#pinpad-bluetooth","title":"Pinpad Bluetooth","text":"<p>Para utilizar um Pinpad Bluetooth pareado ao Smartphone, \u00e9 necess\u00e1rio indicar atrav\u00e9s  da inst\u00e2ncia de Transaction, utilizando o par\u00e2metro ParameterType.PINPAD_ATIVO no  m\u00e9todo withParameter ou m\u00e9todo withEnablePinpad da classe TransactionBuilder e suas especializa\u00e7\u00f5es.</p> <pre><code>Transaction transaction = TransactionBuilder.credit()\n .withApplicationName(\"Sample\")\n .withAmount(20.0)\n .withEnablePinpad(true) \n .build()\n</code></pre> <p>Quando for identificado apenas um Pinpad Bluetooth pareado ao Smartphone, ele ser\u00e1  automaticamente selecionado. Caso contrario, ser\u00e1 utilizado os comandos de UICallback para solicitar ao usu\u00e1rio a indica\u00e7\u00e3o de qual equipamento utilizar na transa\u00e7\u00e3o.</p>"},{"location":"pages/SmartPOS/","title":"SmartPOS","text":""},{"location":"pages/SmartPOS/#smartpos","title":"SmartPOS","text":"<p>Caso o App tenha como alvo um dispositivo SmartPOS, devemos adicionar as  depend\u00eancias requeridas por cada tipo de terminal (fabricante/modelo). </p> <p>Observa\u00e7\u00e3o</p> <p>Verifique as vers\u00f5es de cada depend\u00eancia, durante seu processo de integra\u00e7\u00e3o. A  disponibilidade do terminal, deve ser consultada com seu representante comercial.</p>"},{"location":"pages/SmartPOS/#sunmi-p2","title":"Sunmi P2","text":"<pre><code>implementation project(path: 'library-release:1.0.14')\nimplementation project(path: 'PayLib-release:1.4.61')\nimplementation project(path: 'PPCompp2:1.54')\n</code></pre>"},{"location":"pages/SmartPOS/#ingenico-apos-a8","title":"Ingenico APOS A8","text":"<pre><code>implementation project(path: 'bcapos:5.08') //aar\nimplementation project(path: 'dm-apos:1.6.1-a8') //aar\nimplementation project(path: 'usdk_api_aidl:2.3.12.20200414') //jar\n</code></pre>"},{"location":"pages/SmartPOS/#gertec-gpos700","title":"Gertec GPOS700","text":"<pre><code>implementation project(path: 'ppcomp:1.29.14.210610')\nimplementation project(path: 'gedi-payment-1.14.15.3')\n</code></pre>"},{"location":"pages/SmartPOS/#gertec-gpos780","title":"Gertec GPOS780","text":"<pre><code>implementation project('PPComp-gpos780:1.31')\nimplementation project('libhcl-gpos780:1.0.6')\nimplementation project('gedi-payment-gpos780:1.16.19')\nimplementation project('easy-layer-gpos780-debug:1.0')\n</code></pre>"},{"location":"pages/SmartPOS/#em-desenvolvimento","title":"Em desenvolvimento","text":"<p>Os seguintes modelos de terminais est\u00e3o em processo de desenvolvimento para certifica\u00e7\u00e3o, e ainda n\u00e3o est\u00e3o integrados:</p>"},{"location":"pages/SmartPOS/#positivo-l400","title":"Positivo L400","text":"<pre><code>implementation project(path: 'PositivoAPI-15.5.1-release')\nimplementation project(path: 'PositivoLIB-15.7.11-debug')\n</code></pre>"},{"location":"pages/SmartPOS/#adyen-saturn-s1f2","title":"Adyen Saturn S1F2","text":""},{"location":"pages/SmartPOS/#gertec-gpos760","title":"Gertec GPOS760","text":""},{"location":"pages/SmartPOS/#ingenico-dx8000","title":"Ingenico DX8000","text":""},{"location":"pages/TerminaisHomologados/","title":"Terminais homologados","text":""},{"location":"pages/TerminaisHomologados/#terminais-homologados","title":"Terminais homologados","text":""},{"location":"pages/TerminaisHomologados/#smartpos","title":"SmartPOS","text":"Modelo Adquirentes Vers\u00e3o SDK Status P2 a partir da 2.6.0 OK APOS A8 a partir da 2.6.0 OK GPOS780 a partir da 2.7.10 OK GPOS760 a partir da 2.7.11 OK DX8000 a partir da 2.7.13 OK DX4000 - - DEV L400 - - DEV S1F2 - - DEV"},{"location":"pages/TerminaisHomologados/#pinpad-bluetooth","title":"Pinpad Bluetooth","text":"Modelo Adquirentes Vers\u00e3o SDK Status MOBI PIN10 a partir da 2.6.3 OK MP15 a partir da 2.7.0 OK ICMP a partir da 2.6.3 OK D180 a partir da 2.6.3 OK D200 a partir da 2.6.3 OK ME30S - HML"},{"location":"pages/TerminaisHomologados/#pinpad-usb","title":"Pinpad USB","text":"Modelo Adquirentes Vers\u00e3o SDK Status PPC-920 a partir da 2.7.8(2.6.6 - piloto) OK PPC-930 a partir da 2.7.8(2.6.6 - piloto) OK PPC-940 a partir da 2.7.13 OK LANE-3000 a partir da 2.7.8(2.6.6 - piloto) OK LANE-3600 a partir da 2.7.12 OK"},{"location":"pages/TerminaisHomologados/#totem-mobile","title":"Totem Mobile","text":"<p>Os totens usam Pinpad USB e v\u00e3o seguir as adquirentes homologadas pelo modelo de Pinpad utilizado.</p> Modelo Vers\u00e3o SDK Status D2 a partir da 2.7.8(2.6.6 - piloto) OK D2 Mini a partir da 2.7.8(2.6.6 - piloto) OK K2 a partir da 2.7.8(2.6.6 - piloto) OK K2 Mini a partir da 2.7.8(2.6.6 - piloto) OK T2 Mini a partir da 2.7.8(2.6.6 - piloto) OK T2 a partir da 2.7.8(2.6.6 - piloto) OK GS300 a partir da 2.7.8(2.6.6 - piloto) OK SK-210 a partir da 2.7.10 OK"},{"location":"pages/VersoesLiberadas/","title":"Vers\u00f5es liberadas","text":"<p>Para acessar os Bin\u00e1rios e Release Notes das vers\u00f5es liberadas clique aqui!</p>"},{"location":"pages/Configuracao/Dependencias/","title":"Depend\u00eancias","text":""},{"location":"pages/Configuracao/Dependencias/#dependencias","title":"Depend\u00eancias","text":"<p>O App deve adicionar as depend\u00eancias:</p> <pre><code>implementation project(path: \u2018dtefmobile\u2019) \nimplementation project(path: \u2018log-manager\u2019)\nimplementation project(path: \u2018linxpay-sdk\u2019)\nimplementation 'org.slf4j:slf4j-api:1.7.28'\nimplementation 'com.github.tony19:logback-android:2.0.0'\n</code></pre> <p>As depend\u00eancias acima, s\u00e3o obrigat\u00f3rias para o correto funcionamento da solu\u00e7\u00e3o. </p> <ul> <li>dtefmobile \u2013 biblioteca de pagamento para DTEF Server, compat\u00edvel com SO Android</li> <li>log-manager \u2013 biblioteca respons\u00e1vel pelo registro e gerenciamento do log</li> <li>linxpay-sdk \u2013 nova biblioteca de integra\u00e7\u00e3o para terminais linxpay.</li> </ul>"},{"location":"pages/Configuracao/Logs/","title":"Logs","text":""},{"location":"pages/Configuracao/Logs/#logs","title":"Logs","text":"<p>O DTEFMobile registra num arquivo de log, dados referentes aos par\u00e2metros de  integra\u00e7\u00e3o, fluxo e chamadas de callback. Esse registro possibilita validar e verificar o  comportamento do DTEFMobile durante a execu\u00e7\u00e3o de uma transa\u00e7\u00e3o.</p> <p>Os arquivos de logs ficam armazenados no diret\u00f3rio DTEFMobile\\logs do terminal. O  arquivo logger.log representa o log atual, que ser\u00e1 arquivado na pasta archived, quando  superior a 2MB, com um limite de 100MB em backup de logs.</p> <pre><code>Se os logs n\u00e3o estiverem dispon\u00edveis no diret\u00f3rio informado, seguir com as seguintes \nvalida\u00e7\u00f5es e procedimentos:\n\n    1. Revisar as permiss\u00f5es do App, se Android superior a vers\u00e3o 6\n    2. Reiniciar o dispositivo para for\u00e7ar a grava\u00e7\u00e3o do log no termina\n</code></pre>"},{"location":"pages/Configuracao/Manifest/","title":"Manifest","text":""},{"location":"pages/Configuracao/Manifest/#manifest","title":"Manifest","text":"<p>O dtefmobile requer as seguintes depend\u00eancias. Dessa forma, \u00e9 responsabilidade do App, gerenciar as permiss\u00f5es e solicitar ao usu\u00e1rio, caso necess\u00e1rio.</p> <pre><code>&lt;uses-permission android:name=\"android.permission.ACCESS_NETWORK_STATE\"/&gt;\n&lt;uses-permission android:name=\"android.permission.ACCESS_WIFI_STATE\"/&gt;\n&lt;uses-permission android:name=\"android.permission.CHANGE_WIFI_STATE\"/&gt;\n&lt;uses-permission android:name=\"android.permission.INTERNET\"/&gt;\n&lt;uses-permission android:name=\"android.permission.BLUETOOTH\"/&gt;\n&lt;uses-permission android:name=\"android.permission.BLUETOOTH_ADMIN\"/&gt;\n&lt;uses-permission android:name=\"android.permission.WRITE_EXTERNAL_STORAGE\"/&gt;\n&lt;uses-permission android:name=\"android.permission.READ_EXTERNAL_STORAGE\"/&gt;\n&lt;uses-permission android:name=\"android.permission.WRITE_OWNER_DATA\"/&gt;\n&lt;uses-permission android:name=\"android.permission.READ_OWNER_DATA\"/&gt;\n</code></pre>"},{"location":"pages/Configuracao/Suporte/","title":"Suporte","text":""},{"location":"pages/Configuracao/Suporte/#suporte","title":"Suporte","text":"<p>Para facilitar o suporte ao DTEFMobile, o App de venda deve fornecer uma UI (activity  ou dialog) para visualizar as informa\u00e7\u00f5es retornadas pelo m\u00e9todo getInfo() do MobileSDK.</p> <p>Todas as informa\u00e7\u00f5es retornadas pela interface Info, devem ser apresentadas na UI de  suporte. Tamb\u00e9m sugerimos que informa\u00e7\u00f5es do App de venda que possam auxiliar no  processo de suporte, sejam listadas nessa mesma UI.</p> <p>A disponibiliza\u00e7\u00e3o dessa funcionalidade no App de venda, ser\u00e1 obrigat\u00f3rio para  homologa\u00e7\u00f5es que utilizem DTEFMobile igual ou superior a vers\u00e3o 2.3.1.</p> <p>Essa obrigatoriedade faz parte da iniciativa de melhoria no processo de suporte, que  tem por objetivo facilitar e identificar informa\u00e7\u00f5es b\u00e1sicas do terminal e configura\u00e7\u00f5es  do DTEFMobile.</p>"},{"location":"pages/Impressao/PrintLayoutBuilder/","title":"PrintLayoutBuilder","text":""},{"location":"pages/Impressao/PrintLayoutBuilder/#printlayoutbuilder","title":"PrintLayoutBuilder","text":""},{"location":"pages/Impressao/PrintLayoutBuilder/#printlayoutbuilderprintlayout","title":"PrintLayoutBuilder.PrintLayout","text":"<p>Classe que representa o layout de impress\u00e3o, ou seja, representa uma sequ\u00eancia de  comandos de impress\u00e3o que foram previamente definidos pelo App e que definem um  layout de recibo, por exemplo.</p> <p>Para padronizar e otimizar o processo de impress\u00e3o, o App deve criar uma inst\u00e2ncia do  PrintLayout atrav\u00e9s da classe PrintLayoutBuilder, que disponibiliza um conjunto de  rotinas que auxiliam nesse processo.</p>"},{"location":"pages/Impressao/PrintLayoutBuilder/#printlayoutbuilder_1","title":"PrintLayoutBuilder","text":"<p>Classe que auxilia na formata\u00e7\u00e3o de um recibo de venda ou comprovante de pagamento,  por exemplo.</p> <p>\u00c9 atrav\u00e9s dessa classe, que montamos o layout de impress\u00e3o, utilizando m\u00e9todos que  auxiliam na defini\u00e7\u00e3o dos itens do layout. Com o layout de impress\u00e3o definido, o  PrintLayoutBuilder, gera uma inst\u00e2ncia de PrintLayout, que deve ser informada no  m\u00e9todo print do SmartPrintService.</p> <p>Para melhor gerenciamento e otimiza\u00e7\u00e3o da qualidade de impress\u00e3o, o  PrintLayoutBuilder utiliza o conceito de FontSize, que pr\u00e9-define a fonte da impress\u00e3o e  seu tamanho.</p> <p>Sendo assim, atualmente temos a seguinte defini\u00e7\u00e3o para PrintLayoutBuilder.FontSize: \u00a0\u00a0\u00a0\u00a0\u2022 NORMAL \u2013 valor default, otimizado para 38 colunas   (orientamos utilizar comprovantes com essa defini\u00e7\u00e3o) \u00a0\u00a0\u00a0\u00a0\u2022 LARGE \u2013 otimizado para 44 colunas \u00a0\u00a0\u00a0\u00a0\u2022 SMALL \u2013 otimizado para 48 colunas</p> <pre><code>PrintLayoutBuilder.PrintLayout = PrintLayoutBuilder\n .create(applicationContext)\n .withText(\u201cRECIBO DE\\nVENDA\u201d)\n .withCenterAlign(\"QrCode\")\n .withQrCode(\"valor do QRCode\")\n .withAutomaticLineFeed(true)\n .build() // cria uma instancia de Printlayout\n</code></pre> M\u00e9todo Descri\u00e7\u00e3o create(Context, FontSize) Cria uma inst\u00e2ncia do PrintLayoutBuilder, definindo o tamanho da fonte que ser\u00e1 utilizada para impress\u00e3o de conte\u00fado no formato texto. withText(String) Adiciona ao layout de impress\u00e3o um texto, que pode representar um recibo pr\u00e9-definido, com diversas linhas, separadas por \\n .Esse \u00e9 o m\u00e9todo utilizado para adicionar ao layout, o cupom de TEF, devolvido na resposta da autoriza\u00e7\u00e3o. Esse cupom vem formatado para 38 colunas e utiliza \\n como limitador de linhas. withText(String[]) Adiciona ao layout de impress\u00e3o um conjunto de linhas.Obs.: As linhas adicionadas, devem respeitar a defini\u00e7\u00e3o de FontSize. withLineFeed() Adiciona um avan\u00e7o de linha. withLineFeed(int) Adiciona n avan\u00e7os de linha. withAutomaticLineFeed() Adiciona automaticamente ao final do layout, o avan\u00e7o de linhas necess\u00e1rio para o correto corte do papel. Normalmente, \u00e9 necess\u00e1rio 4 avan\u00e7os para cortar o papel. Sendo assim, se o layout original j\u00e1 tiver adicionado algum avan\u00e7o de linha, ser\u00e1 adicionado apenas a quantidade necess\u00e1ria para possibilitar o corte, sem perda de conte\u00fado. withCenterAlign(String) Adiciona uma linha, com texto centralizado. withCenterAlign(String...) Adiciona N linhas, com texto centralizado. withLeftAlign(String) Adiciona uma linha, com texto alinhado a esquerda. withLeftAlign(String...) Adiciona N linhas, com texto alinhado a esquerda. withRightAling(String) Adiciona uma linha, com texto centralizado a direta. withRightAling(String...) Adiciona N linhas, com texto alinhado a direita. withQrCode(String) Adiciona um QrCode ao layout de impress\u00e3o. O QrCode, ser\u00e1 adicionado de forma centralizada. withQrCode(String, boolean) Adiciona um QrCode ao layout de impress\u00e3o.Obs.: Essa rotina se destina a parceiros que j\u00e1 est\u00e3o integrados com o DTEFMobile e querem otimizar seu processo de impress\u00e3o. Na solu\u00e7\u00e3o anterior, era necess\u00e1rio enviar um QrCode codificado em Base64. Se voc\u00ea deseja enviar o mesmo buffer, deve informar valor true, no par\u00e2metro encode. Com isso, ser\u00e1 inferido o comportamento legado ao processamento do QrCode. withBarcode128(String) Adiciona um barcode 128 com tamanho variado, que garante a correta impress\u00e3o, inclusive para barcode com 44 caracteres. withBitmap(BitMap) Adiciona um bitmap ao layout. withImage(byte[]) Adiciona uma imagem ao layout.Obs.: A imagem deve ser informada como um array de byte. Fique atento ao tamanho da imagem que ser\u00e1 enviada para impress\u00e3o. withImage(byte[], boolean) Adiciona uma imagem ao layout.Obs.: Essa rotina se destina a parceiros que j\u00e1 est\u00e3o integrados com o DTEFMobile e querem otimizar seu processo de impress\u00e3o. Na solu\u00e7\u00e3o anterior, era necess\u00e1rio enviar uma imagem codificada em Base64. Se voc\u00ea deseja enviar o mesmo buffer, deve informar valor true, no par\u00e2metro encode. Com isso, ser\u00e1 inferido o comportamento legado ao processamento da imagem. build() Processa a defini\u00e7\u00e3o do layout e gera uma inst\u00e2ncia de PrintLayout."},{"location":"pages/Impressao/PrintType/","title":"PrintType","text":""},{"location":"pages/Impressao/PrintType/#printtype","title":"PrintType","text":"<p>Define os tipos de impress\u00e3o suportados pelo DTEFMobile. No geral, esse enum foi  disponibilizado para garantir a compatibilidade com o legado e auxiliar os Apps que por  algum motivo, o PrintLayoutBuilder n\u00e3o atende 100%, no momento.</p> <p>Sendo assim, deve ser utilizado nos m\u00e9todos de suporte, dispon\u00edveis em  SmartPrintService.</p>"},{"location":"pages/Impressao/SmartPrintService/","title":"SmartPrintService","text":""},{"location":"pages/Impressao/SmartPrintService/#smartprintservice","title":"SmartPrintService","text":"<p>Servi\u00e7o que fornece a interface necess\u00e1ria para utilizar a impressora nativa de um  equipamento SmartPOS.</p> <p>Para verificar se um terminal suporta impress\u00e3o, o App pode utilizar  MobileSDK.getInfo(), que devolve uma inst\u00e2ncia de Info, onde \u00e9 poss\u00edvel verificar o  suporte a impress\u00e3o, atrav\u00e9s de isPrintSupport().</p> <p>Observa\u00e7\u00e3o</p> <p>O servi\u00e7o de impress\u00e3o abstrai as particularidades de cada terminal e permite uma  integra\u00e7\u00e3o \u00fanica, onde a execu\u00e7\u00e3o \u00e9 realizada de forma ass\u00edncrona e o status da  impress\u00e3o, recuperado atrav\u00e9s do callback SmartPrinter.PrinterCallback.</p> <pre><code>SmartPrintService smartPrintService = SmartPrintService.getInstance();\n\nif (smartPrintService.init(getApplication())) {\n    smartPrintService.print(printLayout, new SmartPrinter.PrinterCallback() {\n\n    @Override\n    public void onSuccess() {\n        Log.i(\"print\", \"onSuccess\");\n    }\n\n    @Override\n    public void onError(int errorCode, String message) {\n        Log.e(\"print\", message);\n    }\n</code></pre> <p>servi\u00e7o e chamar o m\u00e9todo init(), nesse momento, o servi\u00e7o identifica o terminal e  inicializa a biblioteca nativa do hardware.</p> <p>Conforme exemplo, o status da inicializa\u00e7\u00e3o do servi\u00e7o, deve ser consultado antes de  solicitar a impress\u00e3o, atrav\u00e9s do m\u00e9todo print.</p> M\u00e9todo Descri\u00e7\u00e3o init(Context) Inicializa o servi\u00e7o de impress\u00e3o e realiza bind na implementa\u00e7\u00e3o nativa do hardware. print(PrintLayout, PrinterCallback) Imprime o layout definido em PrintLayout e devolve o status atrav\u00e9s do callback PrinterCallback. print(PrintLayout[], PrinterCallback) Imprime uma lista de layout e devolve o status geral da impress\u00e3o. Ou seja, ir\u00e1 indicar sucesso, apenas se imprimir todos os itens da lista. print(PrintType, byte[]) Disponibiliza o modo legado de impress\u00e3o, que exige tratar cada item da impress\u00e3o como uma impress\u00e3o independente.Obs.: Deve ser utilizado apenas por parceiros j\u00e1 integrados e que possuem alguma restri\u00e7\u00e3o em rela\u00e7\u00e3o a nova modalidade print(PrintType, byte[], PrinterCallback) Disponibiliza o modo legado de impress\u00e3o, que exige tratar cada item da impress\u00e3o como uma impress\u00e3o independente, por\u00e9m, realiza a execu\u00e7\u00e3o de forma ass\u00edncrona.Obs.: Deve ser utilizado apenas por Apps j\u00e1 integrados e que possuem alguma restri\u00e7\u00e3o em rela\u00e7\u00e3o a nova modalidade. printBarcode(PrintType, byte[]) Disponibiliza o modo legado de impress\u00e3o, que exige tratar cada item da impress\u00e3o como uma impress\u00e3o independente.Obs.: Deve ser utilizado apenas por Apps j\u00e1 integrados e que possuem alguma restri\u00e7\u00e3o em rela\u00e7\u00e3o a nova modalidade. printBarcode(PrintType, byte[], PrinterCallback) Disponibiliza o modo legado de impress\u00e3o, que exige tratar cada item da impress\u00e3o como uma impress\u00e3o independente, por\u00e9m, realiza a execu\u00e7\u00e3o de forma ass\u00edncrona.Obs.: Deve ser utilizado apenas por Apps j\u00e1 integrados e que possuem alguma restri\u00e7\u00e3o em rela\u00e7\u00e3o a nova modalidade."},{"location":"pages/Integracao/Auth/","title":"Auth","text":""},{"location":"pages/Integracao/Auth/#auth","title":"Auth","text":"<p>Para transacionar com o autorizador Linx (DTEF Server), todo terminal deve ser ativado  e configurado. Esse processo deve ser realizado uma \u00fanica vez, durante a configura\u00e7\u00e3o  do App ou antes da execu\u00e7\u00e3o da primeira transa\u00e7\u00e3o.</p> <p>O processo de ativa\u00e7\u00e3o, inicialmente consiste na defini\u00e7\u00e3o do ambiente que ser\u00e1  utilizado para transacionar.</p> <ul> <li>SANDBOX \u2013 ambiente simulado, disponibilizado para realizar testes de  integra\u00e7\u00e3o e funcional</li> <li>PRODUCTION \u2013 ambiente de produ\u00e7\u00e3o</li> </ul> <p>Utilize o enum Environment para identificar o ambiente:</p> <pre><code>public enum Environment {\n PRODUCTION,\n SANDBOX\n}\n</code></pre> <p>A ativa\u00e7\u00e3o do terminal, requer o CNPJ do estabelecimento que se deseja associar ao terminal e do c\u00f3digo de ativa\u00e7\u00e3o.</p> <p>Com essas informa\u00e7\u00f5es, o App deve criar uma inst\u00e2ncia de Credential e solicitar a  ativa\u00e7\u00e3o.</p> <pre><code>import com.linx.dtefmobile.sdk;\nAuth auth = new Auth(application, this);\nAuth.Credential credential = Auth.AuthCredential.getCredential(Environment.SANDBOX, \n//homologacao\n \"11111111111111\", //cnpj do estabelecimento\n \"baF64aaR5a4dez91a86e72f8\" //token de ativacao\n );\nauth.authenticate(credential, Auth.Callback {})\n</code></pre> <p>Como resultado da ativa\u00e7\u00e3o, o terminal recebe os dados do estabelecimento (empresa, loja e c\u00f3digo do terminal).</p> <p>Para manter compatibilidade com Apps j\u00e1 integrados e que utilizam a interface de integra\u00e7\u00e3o DTEFMobile, onde todos os dados de conectividade s\u00e3o configurados no App, \u00e9 poss\u00edvel realizar a ativa\u00e7\u00e3o da seguinte forma:</p> <p><pre><code>import com.linx.dtefmobile.sdk;\nAuth auth = new Auth(application, this);\nAuth.Credential credential = Auth.CustomCredential.getCredential(host,\n cnpj,\n token //token de ativacao / senha ativacao\n );\nauth.authenticate(credential, Auth.Callback {}\n</code></pre> O exemplo anterior, tamb\u00e9m detalha como realizar o processo de autentica\u00e7\u00e3o e  configura\u00e7\u00e3o do DTEFMobile, quando o ambiente do DTEF n\u00e3o est\u00e1 no cloud Linx.</p> <p>Em ambos os casos, observe que a classe Auth requer uma inst\u00e2ncia de UICallback,  sendo assim, verifique como utiliz\u00e1-la. </p>"},{"location":"pages/Integracao/FinancialType/","title":"FinancialType","text":""},{"location":"pages/Integracao/FinancialType/#financialtype","title":"FinancialType","text":"<p>Enum com a lista dos tipos de financiamento:</p> Item Valor Descri\u00e7\u00e3o ONE_INSTALMENT 0 Avista ISSUER 1 Parcelado administradora (com juros) MERCHANT 2 Parcelado lojista (sem juros) CDC 3 Parcelamento CDC* PRE_DATED 4 Pre-datado WITH_INSTALMENT_CASH 7 Parcelamento com entrada* WITHOUT_INSTALMENT_CASH 8 Parcelamento sem entrada* <p>Observa\u00e7\u00e3o</p> <p>M\u00e9todo getValue() retorna o valor associado ao enum.</p> <p>Regras</p> <p>Op\u00e7\u00f5es de parcelamento CDC, WITH_INSTALMENT_CASH e WITHOUT_INSTALMENT_CASH s\u00e3o suportadas apenas pelo Banrisul/Vero.</p>"},{"location":"pages/Integracao/Info/","title":"Info","text":""},{"location":"pages/Integracao/Info/#info","title":"Info","text":"<p>Interface que disponibiliza informa\u00e7\u00f5es do SDK, terminal e configura\u00e7\u00f5es.</p> <pre><code>info info = MobileSDK.getInfo(context);\n</code></pre> M\u00e9todo Descri\u00e7\u00e3o getSdkVersion Vers\u00e3o do SDKEx.: 2.0.0-280220 getSdkExternalVersion Vers\u00e3o do SDK com informa\u00e7\u00e3o de build.Ex.: 2.0.0-280220-release getHardwareManufacturer Nome do fabricante do hardware. getHardwareModel Modelo do hardware. getBuildType Indica se a vers\u00e3o \u00e9 release ou debug. getProfile Indica o profile do build.Ex.: Linx isPrintSupported Indica se o terminal possui impressora nativa e integrada ao SDK. isSmartPOS Indica se o terminal \u00e9 um SmartPOS. getIdentifier CNPJ ou CPF utilizado na consulta cadastro DTEF. getCompanyCode C\u00f3digo da empresa do DTEF. getStoreCode C\u00f3digo da loja do DTEF. getPointOfSale C\u00f3digo do terminal do DTEF."},{"location":"pages/Integracao/InputModel/","title":"InputModel","text":""},{"location":"pages/Integracao/InputModel/#inputmodel","title":"InputModel","text":"<p>Classe respons\u00e1vel em definir o comportamento da captura de um dado, solicitado ao  usu\u00e1rio.</p> M\u00e9todo Tipo Descri\u00e7\u00e3o getType() Type Tipo do dado que deve ser solicitado ao usu\u00e1rio. Essa informa\u00e7\u00e3o define como os demais par\u00e2metros devem ser interpretados. getLabel() String Descri\u00e7\u00e3o do tipo de captura. Ex.: \u201cNUMERO DE PARCELAS\u201d. getDefaultValue() String Valor default do campo de captura. getMinLength() int N\u00famero m\u00ednimo de d\u00edgitos que deve ser permitido para a captura. getMaxLength() int N\u00famero m\u00e1ximo de d\u00edgitos que deve ser permitido para a captura. isCleanLabel() boolean Indica que o campo label deve ser limpo isExact() boolean Indica que a captura requer uma quantidade exata de d\u00edgitos. getMinValue() T (gen\u00e9rico) Valor m\u00ednimo que deve ser permitido para a captura. Normalmente, informado para captura do tipo AMOUNT, NUMBER. getMaxValue() T (gen\u00e9rico) Valor m\u00e1ximo que deve ser permitido para a captura. Normalmente, informado para captura do tipo AMOUNT, NUMBER. getAmountDecimals() int N\u00famero de casas decimais ap\u00f3s a v\u00edrgula que deve ser permitido para a captura."},{"location":"pages/Integracao/InputModel_Type/","title":"InputModel.Type","text":""},{"location":"pages/Integracao/InputModel_Type/#inputmodeltype","title":"InputModel.Type","text":"<p>Enum que classifica os tipos de captura associados ao InputModel do callback onInput. No geral, o tipo indica como o componente de captura deve se comportar naquele  momento, levando em considera\u00e7\u00e3o m\u00e1scara de edi\u00e7\u00e3o, teclado, etc.</p> Tipo Descri\u00e7\u00e3o AMOUNT Informa que a captura est\u00e1 relacionada a captura de um dado monet\u00e1rio. Sendo assim, deve ser aplicado a m\u00e1scara adequada.Obs.: getMinValue() e getMaxValue() retornam um valor do tipo BigDecimal. AMOUNT_DECIMALS Informa que a captura est\u00e1 relacionada a um valor com casas decimais vari\u00e1vel. Usado, por exemplo, na coleta de valor de quantidade de litros abastecidos em transa\u00e7\u00e3o de frota (que exige 3 casas decimais). TEXT Indica a captura de um dado texto, que suporta n\u00fameros e letras. NUMBER Indica a captura de um dado num\u00e9rico. Sendo assim, deve permitir apenas n\u00fameros.Obs.: getMinValue() e getMaxValue() retornam um valor do tipo int. CARD_NUMBER Indica a captura do n\u00famero do cart\u00e3o. Deve permite apenas n\u00fameros, com no m\u00ednimo 11 e no m\u00e1ximo de 19 d\u00edgitos. CARD_DATE Indica a captura da data de validade do cart\u00e3o. Sendo assim, deve aplicar a m\u00e1scara \" / \". A captura est\u00e1 relaciona a data no formato MM/AA. CARD_SECURITY_CODE Indica a captura do c\u00f3digo de seguran\u00e7a do cart\u00e3o. Por padr\u00e3o, o c\u00f3digo deve conter no m\u00ednimo 3 d\u00edgitos. Contudo, a quantidade m\u00ednima e m\u00e1xima \u00e9 informada atrav\u00e9s do InputModel DATE Indica a captura de uma data. Sendo assim, deve aplicar a m\u00e1scara \" / /. \". A captura est\u00e1 relaciona a data no formato DD/MM/AA.Caso a captura permita que o usu\u00e1rio informe uma data em branco, o App deve informar no m\u00e9todo success da classe Result, o valor em branco \u201c\u201d"},{"location":"pages/Integracao/MenuItem/","title":"MenuItem","text":""},{"location":"pages/Integracao/MenuItem/#menuitem","title":"MenuItem","text":"<p>Classe que representa um item da lista de op\u00e7\u00f5es informado no callback onShowMenu da interface UICallback.</p> M\u00e9todo Tipo Descri\u00e7\u00e3o getCode() int C\u00f3digo do item. getDisplay() String Mensagem que representa a descri\u00e7\u00e3o do item. O App deve exibir o conte\u00fado do atributo display ao usu\u00e1rio. getExternalCode() String C\u00f3digo externo de identifica\u00e7\u00e3o do item, destinado a uso interno do SDK. getRaw() int Representa\u00e7\u00e3o original do item, destinado a uso interno do SDK."},{"location":"pages/Integracao/MenuResult/","title":"MenuResult","text":""},{"location":"pages/Integracao/MenuResult/#menuresult","title":"MenuResult","text":"<p>Classe respons\u00e1vel em retornar o status da intera\u00e7\u00e3o com o usu\u00e1rio, durante a sele\u00e7\u00e3o  de um item da lista de op\u00e7\u00f5es, disponibilizado como par\u00e2metro do m\u00e9todo de callback  onShowMenu, por exemplo.</p> M\u00e9todo Descri\u00e7\u00e3o success(MenuItem item) Indica qual item da lista de op\u00e7\u00f5es, foi selecionado pelo usu\u00e1rio. canceled() Indica que o usu\u00e1rio deseja abortar a captura do dado."},{"location":"pages/Integracao/MobileSDK/","title":"MobileSDK","text":""},{"location":"pages/Integracao/MobileSDK/#mobilesdk","title":"MobileSDK","text":"<p>O processo de integra\u00e7\u00e3o \u00e9 realizado atrav\u00e9s do MobileSDK, que disponibiliza rotinas  para realizar transa\u00e7\u00f5es de cr\u00e9dito, d\u00e9bito, voucher, etc.</p> <p>No geral, transa\u00e7\u00f5es financeiras seguem o fluxo de autoriza\u00e7\u00e3o e confirma\u00e7\u00e3o, sendo  assim, o MobileSDK, fornece os m\u00e9todos necess\u00e1rios para realizar esse fluxo.</p> <pre><code>import com.linx.dtefmobile.sdk;\nMobileSDK mobileSDK = new MobileSDK(Activity, UICallback);\n</code></pre>"},{"location":"pages/Integracao/MobileSDK/#executetransactiontransaction-transaction-transactioncallback-callback","title":"executeTransaction(Transaction transaction, TransactionCallback callback)","text":"<p>Inicia a execu\u00e7\u00e3o de uma transa\u00e7\u00e3o</p>"},{"location":"pages/Integracao/MobileSDK/#confirmtransactiontransaction-transaction","title":"confirmTransaction(Transaction transaction)","text":"<p>Confirma uma transa\u00e7\u00e3o que foi autorizada, mas que ainda est\u00e1 pendente de  confirma\u00e7\u00e3o. O processo de confirma\u00e7\u00e3o \u00e9 obrigat\u00f3rio para efetivar a autoriza\u00e7\u00e3o.</p> <p>No geral, o App deve executar a confirma\u00e7\u00e3o sempre que a transa\u00e7\u00e3o for autorizada, os  dados da autoriza\u00e7\u00e3o interpretados e armazenados corretamente. Contudo, regras  relacionadas a particularidades da funcionalidade e neg\u00f3cio, tamb\u00e9m devem ser utilizadas para inferir esse comportamento.</p> <p>Observa\u00e7\u00e3o</p> <p>Em alguns casos, a execu\u00e7\u00e3o dessa opera\u00e7\u00e3o pode demorar e precisamos ter  cuidado para n\u00e3o bloquear a UiThread.</p>"},{"location":"pages/Integracao/MobileSDK/#undotransactiontransaction-transaction","title":"undoTransaction(Transaction transaction)","text":"<p>Desfaz uma transa\u00e7\u00e3o que foi autorizada. Geralmente, uma transa\u00e7\u00e3o \u00e9 desfeita quando  ocorre algum problema do lado do App e esse problema impossibilita o processamento  da resposta, o armazenamento dos dados da autoriza\u00e7\u00e3o ou a impress\u00e3o do  comprovante.</p> <p>Observa\u00e7\u00e3o</p> <p>Em alguns casos, a execu\u00e7\u00e3o dessa opera\u00e7\u00e3o pode demorar e precisamos ter  cuidado para n\u00e3o bloquear a UiThread.</p>"},{"location":"pages/Integracao/MobileSDK/#finalizetransaction","title":"finalizeTransaction()","text":"<p>Indica que o fluxo de pagamento foi finalizado. No geral, finalizeTransaction, sempre  deve ser executado para uma transa\u00e7\u00e3o confirmada ou desfeita. O App deve executar  essa rotina, ao final do processado de pagamento. Ou seja, deve ser executado uma  \u00fanica vez para cada fluxo de pagamento.</p> <p>Exemplo</p> <p>Para um pagamento finalizado com 2 cart\u00f5es, o App deve confirmar cada transa\u00e7\u00e3o  individualmente e depois executar o finalizeTransaction uma \u00fanica vez.</p>"},{"location":"pages/Integracao/MobileSDK/#getinfo","title":"getInfo()","text":"<p>Retornar uma inst\u00e2ncia da interface Info, com informa\u00e7\u00f5es do SDK e terminal.</p>"},{"location":"pages/Integracao/ParameterType/","title":"ParameterType","text":""},{"location":"pages/Integracao/ParameterType/#parametertype","title":"ParameterType","text":"<p>O ParameterType define a lista dos par\u00e2metros de Input e Output do SDK. Abaixo segue alguns dos par\u00e2metros suportados em cada caso.</p>"},{"location":"pages/Integracao/ParameterType/#input","title":"Input","text":"<p>Define a lista de par\u00e2metros suportados pelo TransactionBuilder, atrav\u00e9s do m\u00e9todo:</p> <pre><code>withParameter(ParameterType)\n</code></pre> <p>Utilizado para informar par\u00e2metros que n\u00e3o est\u00e3o dispon\u00edveis por default no TransactionBuilder ou suas especializa\u00e7\u00f5es. A seguir est\u00e3o listados alguns destes par\u00e2metros:</p> ParameterType (input) Tipo Descri\u00e7\u00e3o PLACA_VEICULO AN (7) Identifica\u00e7\u00e3o da placa compreendendo os 7 d\u00edgitos da identifica\u00e7\u00e3o do ve\u00edculo. MATRICULA_CONDUTOR N C\u00f3digo do motorista. HODOMETRO N Contador da quilometragem percorrida pelo ve\u00edculo. HORIMETRO N Representa a quantidade de tempo de funcionamento do ve\u00edculo. LISTA_PRODUTOS_ABASTECIMENTO AN Lista de dados que contempla dados do abastecimento, troca de \u00f3leo ou outros servi\u00e7os. Esta lista deve ser informada no formato JSON. CODIGO_PRODUTO_CIELO AN Permite informar os c\u00f3digos dos produtos CIELO a serem considerados na transa\u00e7\u00e3o (Ex.: \"79;763;764\", para os produtos PAGAMENTO CARNE ELECTRON, PAGAMENTO CARNE ELO e PAGAMENTO CARNE MASTERCARD respectivamente). TIPO_TRANSACAO_CANCELAMENTO N Permite definir o tipo da transa\u00e7\u00e3o a ser cancelada (\"1\" - CREDITO; \"2\" - DEBITO; \"3\" - QRCODE). TRATAR_DESFAZIMENTO N Deve ser utilizado exclusivamente em vendas com m\u00faltiplos cart\u00f5es. Nestes casos, deve ser informado o valor \"000\" para desabilitar o controle autom\u00e1tico de desfazimento para n\u00e3o desfazer a transa\u00e7\u00e3o anterior, visto que trata-se de v\u00e1rios pagamentos na mesma venda. O valor \"001\" habilita novamente o desfazimento autom\u00e1tico caso a transa\u00e7\u00e3o anterior esteja pendente de confirma\u00e7\u00e3o. O valor default \u00e9 \"001\". VALOR_ENTRADA N Valor da entrada. VALOR_PARCELA1 N Valor da primeira parcela. DATA_PARCELA1 AN Data da primeira parcela. Formato: \"dd/mm/yy\". DATA_PRE_DATADO AN Data do agendamento. Formato: \"dd/mm/yy\". DADOS_SPLIT AN Dados para transa\u00e7\u00e3o de Split de Pagamento, no formato JSON. JSON_INTEGRACAO_QR AN Par\u00e2metro utilizado nas Transa\u00e7\u00f5es com QR Code e na Transa\u00e7\u00e3o de Consultas Gen\u00e9ricas QR. Formato: JSON. [EM DESENVOLVIMENTO] <p>Par\u00e2metros que devem ser utilizados exclusivamente para a rede Calcard:</p> Clique aqui para expandir e mostrar detalhes sobre a rede Calcard <p>Transa\u00e7\u00e3o de Consulta de Planos (utilizando TransactionType.PLANOS_PAGAMENTO):</p> Consulta de Planos (input) Tipo Descri\u00e7\u00e3o NUMERO_CARTAO_AUTOMACAO N N\u00famero do cart\u00e3o digitado. VALIDADE_CARTAO_AUTOMACAO N Data de validade do cart\u00e3o (Formato MMAA). <p>Em transa\u00e7\u00f5es de pagamento (utilizando TransactionType.CARTAO_CREDITO):</p> Transa\u00e7\u00e3o de Pagamento (input) Tipo Descri\u00e7\u00e3o NUMERO_CARTAO_AUTOMACAO N N\u00famero do cart\u00e3o digitado. VALIDADE_CARTAO_AUTOMACAO N Data de validade do cart\u00e3o (Formato MMAA). CODIGO_BANDEIRA_AUTOMACAO N C\u00f3digo da Bandeira (Ex: \"50\" - Calcard). CODIGO_PLANO_AUTOMACAO N C\u00f3digo do Plano (3 \u00faltimos d\u00edgitos do c\u00f3digo do processamento do plano selecionado)."},{"location":"pages/Integracao/ParameterType/#lista_produtos_abastecimento","title":"LISTA_PRODUTOS_ABASTECIMENTO","text":"<p>A lista de servi\u00e7os deve ser informada no formato JSON conforme especifica\u00e7\u00e3o abaixo:</p> Clique aqui para expandir e mostrar detalhes sobre LISTA_PRODUTOS_ABASTECIMENTO <ol> <li> <p>O campo \"tipoServico\" indica qual servi\u00e7o foi realizado. Os valores permitidos s\u00e3o:</p> <ul> <li>\u201c0001\u201d - para abastecimento</li> <li>\u201c0002\u201d - para troca de \u00f3leo</li> <li>\u201c0003\u201d - para outros servi\u00e7os</li> </ul> </li> <li> <p>\u00c9 permitida a entrada de apenas um registro de abastecimento e de um registro de troca de \u00f3leo. Poder\u00e1 ser inclu\u00edda de 1 a n registros para manuten\u00e7\u00e3o realizada.</p> </li> </ol>"},{"location":"pages/Integracao/ParameterType/#abastecimento-e-troca-de-oleo-json-schema","title":"Abastecimento e Troca de \u00f3leo - JSON Schema","text":"<p>Para estes servi\u00e7os, o campo \"tipoAbastecimento\" \u00e9 opcional. Mas caso n\u00e3o seja informado no JSON, ser\u00e1 realizada a coleta durante a transa\u00e7\u00e3o.</p> <pre><code>{\n  \"type\": \"object\",\n  \"properties\": {\n    \"tipoServico\"           : { \"type\": \"string\" },\n    \"codigoServico\"         : { \"type\": \"string\" },\n    \"tipoAbastecimento\"     : { \"type\": \"string\" },\n    \"quantidade\"            : { \"type\": \"string\" },\n    \"quantidade3decimais\"   : { \"type\": \"string\" },\n    \"valorUnitario\"         : { \"type\": \"string\" },\n    \"valorTotal\"            : { \"type\": \"string\" },\n    \"valorTotalComDesconto\" : { \"type\": \"string\" }\n  },\n  \"required\": [\n    \"tipoServico\",\n    \"quantidade\",\n    \"valorUnitario\",\n    \"valorTotal\",\n    \"valorTotalComDesconto\"\n  ]\n}\n</code></pre>"},{"location":"pages/Integracao/ParameterType/#outros-servicos-json-schema","title":"Outros servi\u00e7os - JSON Schema","text":"<pre><code>{\n  \"type\": \"object\",\n  \"properties\": {\n    \"tipoServico\"   : { \"type\": \"string\" },\n    \"codigoServico\" : { \"type\": \"string\" },\n    \"valorTotal\"    : { \"type\": \"string\" }\n  },\n  \"required\": [\n    \"tipoServico\",\n    \"codigoServico\",\n    \"valorTotal\"\n  ]\n}\n</code></pre>"},{"location":"pages/Integracao/ParameterType/#exemplo","title":"Exemplo","text":"<p>Para um abastecimento de 50 litros considerando que o combust\u00edvel custa R$ 4,80 contabilizando um valor total de R$ 240,00:</p> <pre><code>{\n  \"DadosServicos\": [\n    {\n      \"tipoServico\": \"0001\",\n      \"codigoServico\": \"1\",\n      \"valorUnitario\": \"480\",\n      \"quantidade\": \"5000\",\n      \"quantidade3decimais\": \"50000\",\n      \"valorTotal\": \"24000\",\n      \"tipoAbastecimento\": \"10\",\n      \"valorTotalComDesconto\": \"24000\"\n    },\n    {\n      \"tipoServico\": \"0003\",\n      \"codigoServico\": \"123\",\n      \"valorTotal\": \"2500\"\n    }\n  ]\n}\n</code></pre>"},{"location":"pages/Integracao/ParameterType/#dados_split","title":"DADOS_SPLIT","text":"<p>Os dados para Split de Pagamento devem ser informados no formato JSON conforme especifica\u00e7\u00e3o abaixo:</p> Clique aqui para expandir e mostrar detalhes sobre DADOS_SPLIT"},{"location":"pages/Integracao/ParameterType/#json-schema","title":"JSON Schema","text":"<pre><code>{\n  \"type\": \"object\",\n  \"properties\": {\n    \"itensSplit\": {\n      \"type\": \"array\",\n      \"items\": {\n        \"type\": \"object\",\n        \"properties\": {\n          \"valor\"      : { \"type\": \"string\" },\n          \"descricao\"  : { \"type\": \"string\" },\n          \"quantidade\" : { \"type\": \"string\" },\n          \"codigo\"     : { \"type\": \"string\" }\n        },\n        \"required\": [\n          \"valor\",\n          \"descricao\",\n          \"quantidade\",\n          \"codigo\"\n        ]\n      }\n    },\n    \"recebedoresSplit\": {\n      \"type\": \"array\",\n      \"items\": {\n        \"type\": \"object\",\n        \"properties\": {\n          \"valor\" : { \"type\": \"string\" },\n          \"cnpj\"  : { \"type\": \"string\" },\n          \"tipo\"  : { \"type\": \"string\" }\n        },\n        \"required\": [\n          \"valor\",\n          \"cnpj\",\n          \"tipo\"\n        ]\n      }\n    }\n  },\n  \"required\": [\n    \"recebedoresSplit\"\n  ]\n}\n</code></pre>"},{"location":"pages/Integracao/ParameterType/#exemplo_1","title":"Exemplo","text":"<pre><code>{\n  \"itensSplit\":[\n    {\n      \"valor\":\"2990\",\n      \"descricao\":\"descri\u00e7\u00e3o do item 1\",\n      \"quantidade\":\"1\",\n      \"codigo\":\"1A2B3C4D5E6F7\"\n    }\n  ],\n  \"recebedoresSplit\":[\n    {\n      \"valor\":\"2000\",\n      \"cnpj\":\"12345678901234\",\n      \"tipo\":\"0\"\n    },\n    {\n      \"valor\":\"8000\",\n      \"cnpj\":\"12345678905678\",\n      \"tipo\":\"0\"\n    }\n  ]\n}\n</code></pre>"},{"location":"pages/Integracao/ParameterType/#json_integracao_qr-in-em-desenvolvimento","title":"JSON_INTEGRACAO_QR IN - [EM DESENVOLVIMENTO]","text":""},{"location":"pages/Integracao/ParameterType/#transacao-de-consultas-genericas-qr","title":"Transa\u00e7\u00e3o de Consultas Gen\u00e9ricas QR","text":"<p>O par\u00e2metro JSON_INTEGRACAO_QR \u00e9 obrigat\u00f3rio. A automa\u00e7\u00e3o deve informar os dados de entrada no formato JSON correspondentes ao tipo de consulta. E a resposta da solicita\u00e7\u00e3o ser\u00e1 atrav\u00e9s do par\u00e2metro de sa\u00edda JSON_INTEGRACAO_QR OUT.</p> Clique aqui para mais detalhes do par\u00e2metro de entrada em Transa\u00e7\u00f5es de Consultas Gen\u00e9ricas <p>Descri\u00e7\u00e3o dos campos:</p> Campo Descri\u00e7\u00e3o methodRequest Valor fixo para identificar a requisi\u00e7\u00e3o. value O valor da transa\u00e7\u00e3o. document O CPF do cliente."},{"location":"pages/Integracao/ParameterType/#carteiras-ativas-para-a-loja-no-qrlinx","title":"Carteiras Ativas para a loja no QRLinx","text":"<p>A automa\u00e7\u00e3o poder\u00e1 consultar as carteiras que est\u00e3o dispon\u00edveis para uma determinada loja, essa consulta se faz necess\u00e1ria na gera\u00e7\u00e3o de uma cobran\u00e7a espec\u00edfica, pois assim poder\u00e1 solicitar a gera\u00e7\u00e3o do QRCode apenas para as carteiras desejadas.</p> <p>JSON SCHEMA: <pre><code>{\n  \"type\": \"object\",\n  \"required\": [ \"methodRequest\" ],\n  \"properties\": {\n    \"methodRequest\"  : {\n      \"type\" : \"number\",\n      \"const\": \"2\"     }\n  }\n}\n</code></pre></p> <p>EXEMPLO: <pre><code>{\n  \"methodRequest\": 2\n}\n</code></pre></p>"},{"location":"pages/Integracao/ParameterType/#consulta-parcelamento-paga-leve-qrlinx","title":"Consulta Parcelamento (Paga Leve - QRLinx)","text":"<p>A automa\u00e7\u00e3o pode consultar se o parcelamento est\u00e1 disponivel para o cliente, assim poder\u00e1 oferecer um parcelamento de pix antes da finaliza\u00e7\u00e3o da transa\u00e7\u00e3o.</p> <p>Na integra\u00e7\u00e3o com o PSP Paga Leve existe uma integra\u00e7\u00e3o de PIX com a op\u00e7\u00e3o do parcelamento, sendo assim os campos payer, client_identification, is_pix_upfront passam a ser obrigat\u00f3rios para a Transacao com QR Code e o client_phone um campo recomendado.</p> <p>JSON SCHEMA: <pre><code>{\n  \"type\": \"object\",\n  \"required\": [ \"methodRequest\" ],\n  \"properties\": {\n    \"methodRequest\"   : {\n      \"type\" : \"number\",\n      \"const\": \"1\"      },\n    \"value\"           : {\n      \"type\" : \"number\" },\n    \"methodRequest\"   : {\n      \"type\" : \"string\" }\n  }\n}\n</code></pre></p> <p>EXEMPLO: <pre><code>{\n  \"methodRequest\": 1,\n  \"value\":1.50,\n  \"document\":\"12345678901\"\n}\n</code></pre></p>"},{"location":"pages/Integracao/ParameterType/#transacao-com-qr-code","title":"Transa\u00e7\u00e3o com QR Code","text":"<p>O par\u00e2metro JSON_INTEGRACAO_QR \u00e9 opcional, utilizado pela rede QRLinx. Os dados devem ser informados no formato JSON conforme especifica\u00e7\u00e3o abaixo:</p> Clique aqui para mais detalhes do par\u00e2metro de entrada em Transa\u00e7\u00f5es com QR Code"},{"location":"pages/Integracao/ParameterType/#json-schema_1","title":"JSON Schema","text":"Clique aqui para exibir o JSON Schema <pre><code>{\n\"type\": \"object\",\n\"required\": [],\n\"properties\": {\n\n  \"specific_wallets\": {\n    \"type\": \"array\",\n    \"items\": {\n      \"type\": \"string\",\n      \"enum\": [\"AME\", \"CASH_BERTI\", \"MERCADO_PAGO\", \"PEDE_PRONTO\", \"PICPAY\", \"PIX\", \"VERO\"] } },\n\n  \"is_pix_upfront\"  : { \"type\": \"boolean\" },\n\n  \"payments\": {\n    \"type\": \"object\",\n    \"items\": {\n      \"required\": [ \"value\" ],\n      \"properties\": {\n        \"value:\"               : {\n          \"type\": \"number\",\n            \"maximum\": 9999999.99,\n            \"multipleOf\": 0.01   },\n        \"payer\" : {\n          \"type\": \"object\",\n          \"required\": [],\n          \"properties\": {\n            \"first_name\"    : {\n              \"type\": \"string\",\n              \"maxLength\": 30 },\n            \"last_name\"     : {\n              \"type\": \"string\",\n              \"maxLength\": 30 },\n            \"email\"         : {\n              \"type\": \"string\",\n              \"maxLength\": 50 },\n            \"external_code\" : {\n              \"type\": \"string\",\n              \"maxLength\": 36 },\n            \"client_phone\"  : {\n              \"type\": \"object\",\n              \"properties\": {\n                \"area_code\"     : {\n                  \"type\": \"string\",\n                  \"maxLength\": 4  },\n                \"number\"        : {\n                  \"type\": \"string\",\n                  \"maxLength\": 12 },\n                \"extension\"     : {\n                  \"type\": \"string\",\n                  \"maxLength\": 7  }\n              }},\n            \"client_identification\": {\n              \"type\": \"object\",\n              \"required\": [],\n              \"properties\": {\n                \"type\"          : {\n                  \"type\": \"string\",\n                  \"maxLength\": 5  ,\n                  \"enum\": [\"CPF\", \"CNPJ\"]},\n                \"number\"    : {\n                  \"type\": \"string\",\n                  \"maxLength\": 15 }\n              }}\n            }},\n        \"expiration_time\"      : {\n          \"type\": \"integer\",\n          \"maximum\": 99          },\n        \"withdraw_pix\"         : {\n          \"type\": \"number\",\n          \"maximum\": 9999999.99  },\n        \"change_pix\"           : {\n          \"type\": \"number\",\n          \"maximum\": 9999999.99  }\n      }}},\n\n    \"order_items\": {\n      \"type\": \"object\",\n      \"items\": {\n        \"required\": [],\n        \"properties\": {\n          \"name\"               : {\n            \"type\": \"string\",\n            \"maxLength\": 150     },\n          \"quantity\"           : {\n            \"type\": \"number\",\n            \"maximum\": 9999999.99,\n            \"multipleOf\": 0.01   },\n          \"amount\"             : {\n            \"type\": \"number\",\n            \"maximum\": 9999999.99,\n            \"multipleOf\": 0.01   },\n          \"subtotal\"           : {\n            \"type\": \"number\" ,\n            \"maximum\": 9999999.99,\n            \"multipleOf\": 0.01   },\n          \"discount_value\"     : {\n            \"type\": \"number\",\n            \"maximum\": 9999999.99,\n            \"multipleOf\": 0.01   },\n          \"add_value\"          : {\n            \"type\": \"number\",\n            \"maximum\": 9999999.99,\n            \"multipleOf\": 0.01   },\n          \"number_external\"    : {\n            \"type\": \"string\",\n            \"maxLength\": 14      },\n          \"ncm\"                : {\n            \"type\": \"string\",\n            \"maxLength\": 8       }\n        }\n      }},\n\n    \"shipping_address\": {\n      \"type\": \"object\",\n      \"items\": {\n        \"required\": [],\n        \"properties\": {\n          \"street\"        : {\n            \"type\": \"string\",\n            \"maxLength\": 60 },\n          \"postal_code\"   : {\n            \"type\": \"string\",\n            \"maxLength\": 10 },\n          \"number\"        : {\n            \"type\": \"string\",\n            \"maxLength\": 15 },\n          \"complement\"    : {\n            \"type\": \"string\",\n            \"maxLength\": 40 },\n          \"state\"         : {\n            \"type\": \"string\",\n            \"maxLength\": 2  },\n          \"district\"      : {\n            \"type\": \"string\",\n            \"maxLength\": 60 },\n          \"city\"          : {\n            \"type\": \"string\",\n            \"maxLength\": 14 },\n          \"ncm\"           : {\n            \"type\": \"string\",\n            \"maxLength\": 60 }\n        }\n      }}\n}\n}\n</code></pre>"},{"location":"pages/Integracao/ParameterType/#exemplo_2","title":"EXEMPLO","text":"Clique aqui para exibir o Exemplo <pre><code>{\n  \"specific_wallets\":[\n      \"PIX\",\n      \"PICPAY\" ],\n  \"is_pix_upfront\":true,\n  \"payments\":[\n      {\n          \"value:\":1.50,\n          \"payer\":{\n              \"first_name\":\"Ana\",\n              \"last_name\":\"Maria\",\n              \"email\":\"am@linx.com.br\",\n              \"external_code\":\"0\",\n              \"client_phone\":{\n                  \"area_code\":\"11\",\n                  \"number\":\"982232155\",\n                  \"extension\":\"0\"\n              },\n              \"client_identification\":{\n                  \"type\":\"CPF\",\n                  \"number\":\"12345678901\"\n              }\n          },\n          \"expiration_time\":100000,\n          \"withdraw_pix\":0,\n          \"change_pix\":0\n      }\n  ],\n  \"order_items\":[\n      {\n          \"name\":\"produto1\",\n          \"quantity\":1,\n          \"amount\":1.50,\n          \"subtotal\":1.50,\n          \"discount_value\":0.0,\n          \"add_value\":0.0,\n          \"number_external\":\"123\",\n          \"ncm\":\"12345678\"\n      }\n    ]\n}\n</code></pre>"},{"location":"pages/Integracao/ParameterType/#descricao-dos-campos","title":"Descri\u00e7\u00e3o dos campos","text":""},{"location":"pages/Integracao/ParameterType/#specific_wallets","title":"specific_wallets","text":"<p>Este objeto \u00e9 necess\u00e1rio para cria\u00e7\u00e3o de uma cobran\u00e7a espec\u00edfica, ou seja, quando a loja n\u00e3o deseja criar uma cobran\u00e7a com todas as carteiras dispon\u00edveis.</p> <p>O campo aceita apenas o nome da carteira, caso a loja n\u00e3o possua a informa\u00e7\u00e3o de quais carteiras est\u00e3o ativas para transacionar. A automa\u00e7\u00e3o poder\u00e1 utilizar a transa\u00e7\u00e3o de Consultas Gen\u00e9ricas QR (\u201cConsulta Carteiras\u201d), que retorna as carteiras ativas da loja.</p> <p>O campo \u00e9 uma lista, pois a automa\u00e7\u00e3o pode escolher criar a cobran\u00e7a apenas com uma carteira ou mais de uma. Quando a automa\u00e7\u00e3o for enviar a chamada para a cria\u00e7\u00e3o de cobran\u00e7a, ele dever\u00e1 enviar dentre as op\u00e7\u00f5es da lista (conforme o JSON Schema).</p>"},{"location":"pages/Integracao/ParameterType/#is_pix_upfront","title":"is_pix_upfront","text":"<p>Campo para cria\u00e7\u00e3o de PIX parcelado junto \u00e0 \"Paga leve\".</p>"},{"location":"pages/Integracao/ParameterType/#payments","title":"payments","text":"<p>Objeto com informa\u00e7\u00f5es necess\u00e1rias \u00e0 realiza\u00e7\u00e3o do pagamento. Descri\u00e7\u00e3o dos campos:</p> Campo Descri\u00e7\u00e3o value Valor total da venda. Campo utilizado apenas nas transa\u00e7\u00f5es de PIX Saque e PIX Troco payer Informa\u00e7\u00f5es do pagador. expiration_time Tempo em segundos da expira\u00e7\u00e3o da cobran\u00e7a criada. withdraw_pix Representa o valor que o cliente deseja sacar na loja, ou seja, utilizar o PIX SAQUE. change_pix Representa o valor que o cliente deseja de troco na transa\u00e7\u00e3o, ou seja, utilizar o PIX TROCO."},{"location":"pages/Integracao/ParameterType/#payer","title":"&gt; payer","text":"Campo Descri\u00e7\u00e3o first_name Primeiro nome do pagador last_name \u00daltimo nome do pagador. email E-mail do pagador. external_code C\u00f3digo do cliente no PSP de dados do EC. client_phone Dados do telefone do pagador. client_identification Natureza jur\u00eddica do pagador (Pessoa F\u00edsica/Jur\u00eddica)."},{"location":"pages/Integracao/ParameterType/#client_phone","title":"&gt;&gt; client_phone","text":"Campo Descri\u00e7\u00e3o area_code C\u00f3digo de \u00e1rea do telefone do pagador. number N\u00famero do telefone do pagador. extension Ramal do telefone do pagador."},{"location":"pages/Integracao/ParameterType/#client_identification","title":"&gt;&gt; client_identification","text":"Campo Descri\u00e7\u00e3o type Natureza jur\u00eddica do pagador. \"CPF\" para pessoa f\u00edsica; \"CNPJ\" para pessoa jur\u00eddica. number N\u00famero do CPF/CNPJ do pagador. Campo obrigat\u00f3rio para integra\u00e7\u00f5es com Paga Leve."},{"location":"pages/Integracao/ParameterType/#order_items","title":"order_items","text":"<p>Itens da ordem de venda.</p> Campo Descri\u00e7\u00e3o name Descri\u00e7\u00e3o do item. quantity Quantidade do item. amount Valor total do item. subtotal Subtotal do item. discount_value Valor do desconto concedido. add_value Valor adicionado \u00e0 venda. Ex.: frete, embalagem. number_external C\u00f3digo do item. ncm Natureza jur\u00eddica do pagador (Pessoa F\u00edsica/Jur\u00eddica)."},{"location":"pages/Integracao/ParameterType/#shipping_address","title":"shipping_address","text":"<p>Endere\u00e7o para entrega da compra.</p> Campo Descri\u00e7\u00e3o street Descri\u00e7\u00e3o do logradouro. postal_code CEP do logradouro. number N\u00famero do logradouro complement Complemento do endere\u00e7o. state Estado/UF do endere\u00e7o. district Bairro do logradouro city C\u00f3digo do item. ncm Cidade do logradouro."},{"location":"pages/Integracao/ParameterType/#pix-troco-e-pix-saque","title":"PIX Troco e PIX Saque","text":"<p>Segue detalhes sobre as opera\u00e7\u00f5es de PIX Saque ou PIX Troco e seus respectivos campos obrigat\u00f3rios. N\u00e3o \u00e9 permitido gerar uma cobran\u00e7a de PIX Saque e PIX Troco em conjunto, caso os campos espec\u00edficos (change_pix e withdraw_pix) sejam enviados, o QRLinx retornar\u00e1 erro na cria\u00e7\u00e3o da cobran\u00e7a.</p>"},{"location":"pages/Integracao/ParameterType/#pix-troco","title":"PIX Troco","text":"<p>No caso do Pix Troco, o saque de recursos em esp\u00e9cie acontece junto com a realiza\u00e7\u00e3o de uma compra no agente de saque. Nesse caso, o Pix \u00e9 feito pelo valor total (compra + saque). O extrato do cliente evidenciar\u00e1 o valor correspondente ao saque e o valor correspondente \u00e0 compra.</p> <p>Importante que para gerar um PIX Troco, a automa\u00e7\u00e3o dever\u00e1 enviar o campo \u201cpayments.value\u201d conforme a compra realizada pelo cliente, e no campo \u201cpayments.change_pix\u201d informar o valor que o cliente deseja sacar/receber de troco. Por fim, o campo \u201corder_items.amount\u201d representa a soma dos dois campos na cria\u00e7\u00e3o da cobran\u00e7a.</p> <p>O campo change_pix de \"payments\" \u00e9 obrigat\u00f3rio na cria\u00e7\u00e3o desta cobran\u00e7a.</p>"},{"location":"pages/Integracao/ParameterType/#pix-saque","title":"PIX Saque","text":"<p>O Pix Saque permitir\u00e1 que todos os clientes de qualquer participante do Pix realizem um saque em um dos pontos que ofertar o servi\u00e7o. Estabelecimentos comerciais, redes de caixas eletr\u00f4nicos (ATMs) compartilhados e os pr\u00f3prios participantes do Pix, por meio de seus ATMs pr\u00f3prios, poder\u00e3o ofertar o servi\u00e7o. Para ter acesso aos recursos em esp\u00e9cie, basta que o cliente fa\u00e7a um Pix para o agente de saque, em din\u00e2mica similar \u00e0 de um Pix normal, a partir da leitura de um QRCode mostrado ao cliente.</p> <p>Importante que para gerar um PIX Saque, a automa\u00e7\u00e3o dever\u00e1 enviar o campo \u201cpayments.value\u201d zerado, j\u00e1 que n\u00e3o est\u00e1 ocorrendo uma compra e sim apenas um saque junto ao estabelecimento.</p> <p>O campo withdraw_pix de \"payments\" \u00e9 obrigat\u00f3rio na cria\u00e7\u00e3o desta cobran\u00e7a.</p>"},{"location":"pages/Integracao/ParameterType/#output","title":"Output","text":"<p>Define a lista de par\u00e2metros suportados pelo TransactionResult, atrav\u00e9s do m\u00e9todo:</p> <pre><code>String getParameter(ParameterType type)\n</code></pre> <p>A seguir est\u00e3o listados alguns destes par\u00e2metros de retorno:</p> ParameterType (output) Tipo Descri\u00e7\u00e3o CARTAO_PREPAGO A (1) Indica se o cart\u00e3o utilizado \u00e9 pr\u00e9-pago. Atualmente esta informa\u00e7\u00e3o \u00e9 retornada pela adquirente CIELO. (\"S\" - SIM; \"N\" - N\u00c3O) NSU_REDE_ADICIONAL AN (32) Para suportar valor de NSU das Redes com at\u00e9 32 d\u00edgitos. PLANOS_PAGAMENTO AN Par\u00e2metro de output da Consulta de Planos. CODIGO_PSP N C\u00f3digo do PSP da Transa\u00e7\u00e3o com QR Code. NOME_PSP AN Descri\u00e7\u00e3o do PSP da Transa\u00e7\u00e3o com QR Code. METODO_PAGAMENTO_QR AN M\u00e9todo de pagamento da Transa\u00e7\u00e3o com QR Code.  Ex: \"PIX\". [EM DESENVOLVIMENTO] END_TO_END_ID N Identificador EndToEnd da Transa\u00e7\u00e3o com QR Code.  Ex: \"E10032025183507\".[EM DESENVOLVIMENTO] JSON_DADOS_ADICIONAIS_QR AN Par\u00e2metro de output com dados adicionais da Transa\u00e7\u00e3o com QR Code. Formato: JSON.  Ex: \"{\"IdEndToEnd\":\"E10032025183507\",\"multiPsp\":\"false\"}\" [EM DESENVOLVIMENTO] JSON_INTEGRACAO_QR AN Par\u00e2metro de output das Consultas Gen\u00e9ricas QR. Formato: JSON. [EM DESENVOLVIMENTO]"},{"location":"pages/Integracao/ParameterType/#planos_pagamento","title":"PLANOS_PAGAMENTO","text":"<p>Par\u00e2metro de sa\u00edda da Consulta de Planos.</p> Clique aqui para expandir e mostrar detalhes sobre PLANOS_PAGAMENTO <p>Detalhamento dos dados dos planos de pagamentos da transa\u00e7\u00e3o de Consulta de Planos:</p> Tipo Formato Descri\u00e7\u00e3o N008 DDMMAAAA Data de nascimento do portador. A050 ASCII Nome do portador do cart\u00e3o. A001 ASCII Fixo \u201cP\u201d, indica consulta de plano de parcelamento. <p>Para cada c\u00f3digo de processamento o bloco abaixo se repetir\u00e1:</p> Tipo Formato Descri\u00e7\u00e3o N006 ASCII C\u00f3digo de Processamento. N005 ASCII Vencimento Primeira Parcela AADDD (data Juliana). N001 ASCII Flag Juros. N001 ASCII Flag Pula Ciclo. <p>Os campos descritos abaixo podem repetir para demostrar a quantidade de parcelas do tipo de opera\u00e7\u00e3o escolhido.</p> Tipo Formato Descri\u00e7\u00e3o N002 ASCII N\u00famero da Parcela. N008 ASCII Valor Primeira Parcela. N008 ASCII Valor Demais Parcelas. N005 ASCII Taxa de Juros. N005 ASCII CET Anual. A001 ASCII Finalizador de Plano. Ao t\u00e9rmino dos planos de parcelamento do c\u00f3digo de processamento indicado, ser\u00e1 inclu\u00eddo um caractere para indicar fim do plano. Esse caractere ser\u00e1 \u201c;"},{"location":"pages/Integracao/ParameterType/#exemplo_3","title":"Exemplo","text":"<pre><code>27021988\nNOME DO CLIENTE                                   \nP\n91000124315000100016198000161980000000794;96400424315100400005420000054200169962031;\n96400524315100500004653000046530169962031;93010224315000200008099000080990169962031;\n93010324315000300005400000053990169962031;93010424315000400004048000040500169962031;\n93010524315000500003238000032400169962031;94035224345110200009432000094320079017072;\n94035324345110300006533000065330079017072;94035424345110400005088000050880079017072;\n94035524345110500004225000042250079017072;94035624345110600003653000036530079017072;\n94035724345110700003247000032470079017072;94035824345110800002945000029450079017072;\n94035924345110900002713000027130079017072;94036024345111000002529000025290079017072;\n96401424315100200009355000093550169962031;96401324315100300006720000067200169962031;\n91000324345110100018148000181480079017072;\n</code></pre>"},{"location":"pages/Integracao/ParameterType/#json_integracao_qr-out-em-desenvolvimento","title":"JSON_INTEGRACAO_QR OUT - [EM DESENVOLVIMENTO]","text":""},{"location":"pages/Integracao/ParameterType/#transacao-de-consultas-genericas-qr_1","title":"Transa\u00e7\u00e3o de Consultas Gen\u00e9ricas QR","text":"<p>A resposta da Transa\u00e7\u00e3o de Consultas Gen\u00e9ricas QR ser\u00e1 feita atrav\u00e9s do par\u00e2metro de sa\u00edda JSON_INTEGRACAO_QR. Os dados retornados v\u00e3o depender do tipo da solicita\u00e7\u00e3o realizada.</p> Clique aqui para expandir e mostrar detalhes sobre o par\u00e2metro de sa\u00edda JSON_INTEGRACAO_QR"},{"location":"pages/Integracao/ParameterType/#carteiras-ativas-para-a-loja-no-qrlinx_1","title":"Carteiras Ativas para a loja no QRLinx","text":"<p>O retorno da consulta das carteiras que est\u00e3o dispon\u00edveis para uma determinada loja segue o seguinte exemplo:</p> <p>EXEMPLO: <pre><code>{\n  \"success\":true,\n  \"message\":\"Carteiras retornadas com sucesso\",\n  \"data\":[\n      {\n          \"cnpj\":\"22896431000110\",\n          \"name\":\"Picpay Servicos S.A\",\n          \"trading_name\":\"PicPay\",\n          \"logo_link\":\"https://static.linxpayhub.com.br/images/logos/LogoPicPay.png\",\n          \"logo_link_download\":\"https://static.linxpayhub.com.br/images/logos/LogoPicPay.png\",\n          \"specific_wallet\":\"PICPAY\"\n      },\n      {\n          \"cnpj\":\"00000000000000\",\n          \"name\":\"Pix\",\n          \"trading_name\":\"Pix\",\n          \"logo_link\":\"https://static.linxpayhub.com.br/images/logos/LogoPix.jpg\",\n          \"logo_link_download\":\"https://static.linxpayhub.com.br/images/logos/LogoPix.jpg\",\n          \"specific_wallet\":\"PIX\",\n          \"integrationTypePixModel\":{\n              \"id\":7,\n              \"name\":\"Pagar.me\",\n              \"priority\":\"Primary\"\n          }\n      },\n      {\n          \"cnpj\":\"00000000000000\",\n          \"name\":\"Pix\",\n          \"trading_name\":\"Pix\",\n          \"logo_link\":\"https://static.linxpayhub.com.br/images/logos/LogoPix.jpg\",\n          \"logo_link_download\":\"https://static.linxpayhub.com.br/images/logos/LogoPix.jpg\",\n          \"specific_wallet\":\"PIX\",\n          \"integrationTypePixModel\":{\n              \"id\":5,\n              \"name\":\"Santander\",\n              \"priority\":\"Secondary\"\n          }\n      }\n    ]\n}\n</code></pre></p>"},{"location":"pages/Integracao/ParameterType/#consulta-parcelamento-paga-leve-qrlinx_1","title":"Consulta Parcelamento (Paga Leve - QRLinx)","text":"<p>Essa consulta possui apenas duas mensagens de retorno \u201cApproved\u201d ou \u201cDeclined\u201d, assim a loja ter\u00e1 a informa\u00e7\u00e3o se o PIX parcelado est\u00e1 aprovado ou n\u00e3o para o seu cliente. Segue um exemplo:</p> <p>EXEMPLO: <pre><code>{\n    \"sucesso\":true,\n    \"message\":\"Consulta realizada com sucesso\",\n    \"data\":{\n        \"status\":\"APPROVED\"\n    }\n}\n</code></pre></p> <p>Obs: Caso o cliente do lojista seja aprovado no pagamento do PIX parcelado, a automa\u00e7\u00e3o dever\u00e1 enviar a Transa\u00e7\u00e3o QR Code com o campo is_pix_upfront = \"false\". O QRLinx retornar\u00e1 o link de pagamento da Paga Leve atrav\u00e9s da callback setCurrentTransactionInfo, que poder\u00e1 ser exibido ou enviado para o cliente concluir o processo de pagamento.</p>"},{"location":"pages/Integracao/Result/","title":"Result","text":""},{"location":"pages/Integracao/Result/#result","title":"Result","text":"<p>Classe respons\u00e1vel em retornar para o MobileSDK, o status da intera\u00e7\u00e3o com o usu\u00e1rio,  durante a captura de um dado atrav\u00e9s do callback onInput ou onMaskInput, por  exemplo. Uma inst\u00e2ncia dessa classe \u00e9 passada para o App, que deve utiliz\u00e1-la para  sinalizar o resultado da captura.</p> M\u00e9todo Descri\u00e7\u00e3o success(String input) Tipo do dado que deve ser solicitado ao usu\u00e1rio. Essa informa\u00e7\u00e3o define como os demais par\u00e2metros deve ser interpretado. canceled() Indica que o usu\u00e1rio deseja abortar a captura do dado."},{"location":"pages/Integracao/SDK/","title":"SDK","text":""},{"location":"pages/Integracao/SDK/#sdk","title":"SDK","text":"<p>As interfaces de integra\u00e7\u00e3o est\u00e3o dispon\u00edveis no pacote com.linx.dtefmobile.sdk do  dtefmobile.aar, onde \u00e9 poss\u00edvel encontrar classes, interface, enums, necess\u00e1rios para o  processo de integra\u00e7\u00e3o.</p> <p>O MobileSDK \u00e9 disponibilizado como uma abstra\u00e7\u00e3o e evolu\u00e7\u00e3o para a integra\u00e7\u00e3o com  CDTEFMobile. Sendo assim, os Apps j\u00e1 integrados podem atualizar o modelo de  integra\u00e7\u00e3o, utilizando a nova interface MobileSDK ou apenas atualizar o .aar, uma vez,  que foi mantida toda compatibilidade da integra\u00e7\u00e3o.</p>"},{"location":"pages/Integracao/Transaction/","title":"Transaction","text":""},{"location":"pages/Integracao/Transaction/#transaction","title":"Transaction","text":"<p>Representa os dados de entrada da transa\u00e7\u00e3o. A inst\u00e2ncia dessa classe, fornece ao  MobileSDK o tipo da transa\u00e7\u00e3o que deve ser executada, al\u00e9m dos dados adicionais, que  foram previamente capturados pelo App.  Ex.: Valor da transa\u00e7\u00e3o, n\u00famero de parcelas, tipo de financiamento, etc.</p> <p>Uma inst\u00e2ncia de Transaction deve ser obtida atrav\u00e9s da classe TransactionBuilder, que  fornece m\u00e9todos utilit\u00e1rios para criar um Builder gen\u00e9rico ou uma de suas  especializa\u00e7\u00f5es.</p> <p><pre><code>TransactionBuilder.from(TransactionType.CARTAO_CREDITO)\n    .withApplicationName(\"Sample\")\n    .withAmount(20.00)\n    .build()\n</code></pre> ou</p> <pre><code>CreditTransactionBuilder = TransactionBuilder.credit()\n    .withApplicationName(\"Sample\")\n    .withAmount(20.0)\n    .build()\n</code></pre>"},{"location":"pages/Integracao/TransactionBuilder/","title":"TransactionBuilder","text":""},{"location":"pages/Integracao/TransactionBuilder/#transactionbuilder","title":"TransactionBuilder","text":"<p>Classe que auxilia no processo de parametriza\u00e7\u00e3o de uma transa\u00e7\u00e3o. \u00c9 atrav\u00e9s dela, que  podemos definir o tipo da transa\u00e7\u00e3o e podemos informar os par\u00e2metros necess\u00e1rios para processar a transa\u00e7\u00e3o solicitada.</p> <p>As informa\u00e7\u00f5es que n\u00e3o foram previamente capturadas pelo App e passadas para o  MobileSDK, atrav\u00e9s do Transaction, ser\u00e3o solicitadas ao usu\u00e1rio durante o fluxo  transacional, caso necess\u00e1rio. Essa intera\u00e7\u00e3o ocorre como chamadas aos callbacks  definidos na interface UICallback.</p> M\u00e9todo Descri\u00e7\u00e3o from(TransactionType) Cria uma inst\u00e2ncia gen\u00e9rica de TransactionBuilder com m\u00e9todos auxiliares para defini\u00e7\u00e3o de par\u00e2metros gerais de uma transa\u00e7\u00e3o. debit() Cria uma inst\u00e2ncia de DebitTransactionBuilder, que auxilia na parametriza\u00e7\u00e3o da transa\u00e7\u00e3o de d\u00e9bito. credit() Cria uma inst\u00e2ncia de CreditTransactionBuilder, que auxilia na parametriza\u00e7\u00e3o da transa\u00e7\u00e3o de cr\u00e9dito. voucher() Cria uma inst\u00e2ncia de VoucherTransactionBuilder, que auxilia na parametriza\u00e7\u00e3o da transa\u00e7\u00e3o de voucher. cancel() Cria uma inst\u00e2ncia de CancelTransactionBuilder, que auxilia na parametriza\u00e7\u00e3o da transa\u00e7\u00e3o de cancelamento. confirm() Cria uma inst\u00e2ncia de ConfirmationTransactionBuilder, que auxilia na parametriza\u00e7\u00e3o da transa\u00e7\u00e3o de confirma\u00e7\u00e3o. undo() Cria uma inst\u00e2ncia de UndoTransactionBuilder, que auxilia na parametriza\u00e7\u00e3o da transa\u00e7\u00e3o de desfazimento."},{"location":"pages/Integracao/TransactionBuilder/#parametros-da-transacao","title":"Par\u00e2metros da transa\u00e7\u00e3o","text":"M\u00e9todo Descri\u00e7\u00e3o withAmount Valor da transa\u00e7\u00e3o. withCpf CPF do cliente, se for necess\u00e1rio para transa\u00e7\u00e3o. withInstallment N\u00famero de parcelas. withCardNumber N\u00famero do cart\u00e3o, quando transa\u00e7\u00e3o digitada habilitada para o estabelecimento. withFinancialType Tipo do financiamento, normalmente utilizado para opera\u00e7\u00e3o de cr\u00e9dito e d\u00e9bito. withNsu Nsu da transa\u00e7\u00e3o, normalmente utilizada no cancelamento e reimpress\u00e3o de comprovante. withApplicationName Nome do App. withBillOfSale C\u00f3digo do cupom fiscal. withDateOfSale Data do cupom fiscal. withHourOfSale Hora do cupom fiscal. withEnablePinpad Desabilita o leitor de cart\u00e3o para a transa\u00e7\u00e3o.Obs.: Verificar com a equipe e homologa\u00e7\u00e3o, quando \u00e9 poss\u00edvel utilizar essa parametriza\u00e7\u00e3o, caso necess\u00e1rio. withDateAndHourOfSale Data e hora do cupom fiscal. withCardNumberTypingEnable Desabilita a captura digitada do cart\u00e3o. Quando a leitura do cart\u00e3o for cancelada pelo usu\u00e1rio, n\u00e3o ser\u00e1 solicitada a digita\u00e7\u00e3o. withOriginalTransactionDate Data da transa\u00e7\u00e3o original.Ex.: Transa\u00e7\u00e3o de reimpress\u00e3o e cancelamento. withInstallment N\u00famero de parcelas. withInstallmentEntryAmount Valor da entrada. withInstallmentFirstAmount Valor da primeira parcela. withInstallmentFirstDate Data da primeira parcela. Formato dd/mm/yy. withPreDated Data do agendamento. Formato dd/mm/yy. build() Retorna um Intent, configurado para o tipo de transa\u00e7\u00e3o e par\u00e2metros definidos."},{"location":"pages/Integracao/TransactionBuilder/#alguns-exemplos-de-utilizacao-baseados-no-tipo-de-financiamento","title":"Alguns exemplos de utiliza\u00e7\u00e3o baseados no tipo de financiamento:","text":""},{"location":"pages/Integracao/TransactionBuilder/#one_instalment-a-vista","title":"ONE_INSTALMENT - \u00c0 vista","text":"<pre><code>new TransactionBuilder(TransactionType.CARTAO_DEBITO)\n        .withFinancialType(FinancialType.ONE_INSTALMENT)\n        .withApplicationName(\"AppMobile\") // nome da aplica\u00e7\u00e3o\n        .withEnablePinpad(true)\n        .withAmount(getRandomAmount())\n        .build();\n</code></pre>"},{"location":"pages/Integracao/TransactionBuilder/#with_instalment_cash-parcelamento-com-entrada","title":"WITH_INSTALMENT_CASH - Parcelamento com entrada","text":"<pre><code>new TransactionBuilder(TransactionType.CARTAO_DEBITO)\n      .withFinancialType(FinancialType.WITH_INSTALMENT_CASH)\n      .withInstallment(2) // n\u00famero de parcelas\n      .withInstallmentEntryAmount(100.00) // valor da entrada\n      .withApplicationName(\"AppMobile\") // nome da aplica\u00e7\u00e3o\n      .withAmount(200.00) // valor da transa\u00e7\u00e3o\n      .build();\n</code></pre>"},{"location":"pages/Integracao/TransactionBuilder/#without_instalment_cash-parcelamento-sem-entrada","title":"WITHOUT_INSTALMENT_CASH - Parcelamento sem entrada","text":"<pre><code> new TransactionBuilder(TransactionType.CARTAO_DEBITO)\n      .withFinancialType(FinancialType.WITHOUT_INSTALMENT_CASH)\n      .withInstallment(3) // n\u00famero de parcelas\n      .withInstallmentFirstAmount(50.00) // valor da primeira parcela\n      .withInstallmentFirstDate(\"20/04/24\") // data da primeira parcela\n      .withApplicationName(\"AppMobile\") // nome da aplica\u00e7\u00e3o\n      .withAmount(200.00) // valor da transa\u00e7\u00e3o\n      .build();\n</code></pre>"},{"location":"pages/Integracao/TransactionBuilder/#pre_dated-pre-datado","title":"PRE_DATED - Pr\u00e9-datado","text":"<pre><code> new TransactionBuilder(TransactionType.CARTAO_DEBITO)\n      .withFinancialType(FinancialType.PRE_DATED)\n      .withPreDated(\"15/04/24\") // data do agendamento\n      .withApplicationName(\"AppMobile\") // nome da aplica\u00e7\u00e3o\n      .withAmount(200.00) // valor da transa\u00e7\u00e3o\n      .build();\n</code></pre>"},{"location":"pages/Integracao/TransactionResult/","title":"TransactionResult","text":""},{"location":"pages/Integracao/TransactionResult/#transactionresult","title":"TransactionResult","text":"<p>Classe respons\u00e1vel por representar o status e dados de resposta de uma transa\u00e7\u00e3o. A  inst\u00e2ncia dessa classe \u00e9 obtida atrav\u00e9s do callback TransactionCallback, fornecido como  um dos par\u00e2metros do executeTransaction do MobileSDK, por exemplo.</p> <p>Quando uma transa\u00e7\u00e3o \u00e9 executada, o MobileSDK gera um evento atrav\u00e9s do m\u00e9todo  onResult do TransactionCallback, dessa forma, o App obt\u00e9m o status de execu\u00e7\u00e3o da  transa\u00e7\u00e3o. </p> <p>Observa\u00e7\u00e3o</p> <p>Fique atento, algumas informa\u00e7\u00f5es s\u00e3o retornadas apenas em determinadas  transa\u00e7\u00f5es. Sendo assim, os dados s\u00e3o opcionais dependendo do contexto e resultado  da transa\u00e7\u00e3o.</p> M\u00e9todo Tipo Descri\u00e7\u00e3o getResultCode int C\u00f3digo que indica o status de execu\u00e7\u00e3o da transa\u00e7\u00e3o. Devemos considerar apenas o valor 0 (zero), como indicador de execu\u00e7\u00e3o finalizada com sucesso. Sendo assim, para considerar que uma transa\u00e7\u00e3o de cr\u00e9dito foi autorizada com sucesso, o resultCode deve indicar valor igual a 0 (zero). getType TransactionType Tipo da transa\u00e7\u00e3o que foi executada. getTransactionCode int C\u00f3digo da transa\u00e7\u00e3o executada, associado ao TransactionType. getTransactionAmount String Valor da transa\u00e7\u00e3o em sua representa\u00e7\u00e3o em texto. geTransactionDiscount String Valor do desconto em sua representa\u00e7\u00e3o em texto, caso fa\u00e7a parte do contexto da transa\u00e7\u00e3o que foi executada. getAuthorizationCode String C\u00f3digo de autoriza\u00e7\u00e3o da transa\u00e7\u00e3o, gerado pelo autorizador. getNsu String C\u00f3digo NSU gerado pelo sistema de TEF. getAuthorizerNsu String C\u00f3digo NSU gerado pelo autorizador da transa\u00e7\u00e3o. getAuthorizerNsuAdicional String C\u00f3digo NSU Adicional, para suportar valor de NSU das Redes com at\u00e9 32 d\u00edgitos. getBrandCode String C\u00f3digo da bandeira associado ao cart\u00e3o, utilizado na transa\u00e7\u00e3o. getBrand String Nome da bandeira do cart\u00e3o, utilizado na transa\u00e7\u00e3o. getResponseCode String C\u00f3digo de resposta da transa\u00e7\u00e3o. Normalmente, utilizamos para identificar poss\u00edveis motivos da rejei\u00e7\u00e3o de uma transa\u00e7\u00e3o. getReceipt String Comprovante da transa\u00e7\u00e3o, no formato reduzido. Obs.: Depende do suporte por parte do autorizador.O comprovante de venda \u00e9 formatado em 38 colunas, onde as linhas s\u00e3o delimitadas com \\n . getCustomerSalesReceipt String Comprovante da transa\u00e7\u00e3o, destinada ao cliente.O comprovante de venda \u00e9 formatado em 38 colunas, onde as linhas s\u00e3o delimitadas com \\n . getStoreSalesReceipt String Comprovante da transa\u00e7\u00e3o, destinado ao lojista. O comprovante de venda \u00e9 formatado em 38 colunas, onde as linhas s\u00e3o delimitadas com \\n . getErrorMessage String Mensagem de erro, formatada quando a transa\u00e7\u00e3o n\u00e3o foi autorizada. getCardHolderName String Nome do portador do cart\u00e3o. getCardValidity String Validade do cart\u00e3o. getCardNumber String N\u00famero do cart\u00e3o, devolvido de forma mascarada. BIN + 4 \u00daltimos D\u00edgitos. getEspecialData String Dados especiais, utilizado para retornar os dados capturados, atrav\u00e9s executeTransactionEspecial. getBrandCodeSefaz String C\u00f3digo da bandeira do cart\u00e3o, utilizado na identifica\u00e7\u00e3o, junto a Sefaz. getInstallment Integer N\u00famero de parcelas utilizado para financiar a transa\u00e7\u00e3o de cr\u00e9dito, por exemplo. getAcquirerCode String C\u00f3digo do adquirente / autorizador que processou a transa\u00e7\u00e3o. getFinancialType String Tipo de financiamento utilizado na transa\u00e7\u00e3o.0 \u2013 \u00c0 vista1 \u2013 Administradora (com juros)2 \u2013 Lojistas (sem juros)3 \u2013 Pr\u00e9-datado getOperationType String getParameter String Permite recuperar informa\u00e7\u00f5es da resposta da transa\u00e7\u00e3o, que n\u00e3o est\u00e3o definidos na interface default, indicando a informa\u00e7\u00e3o requerida atrav\u00e9s de ParameterType."},{"location":"pages/Integracao/TransactionType/","title":"TransactionType","text":""},{"location":"pages/Integracao/TransactionType/#transactiontype","title":"TransactionType","text":"<p>Define a lista de transa\u00e7\u00f5es suportadas pelo MobileSDK e que devemos utilizar para criar  uma inst\u00e2ncia de TransactionBuilder, atrav\u00e9s do m\u00e9todo:</p> <pre><code>from(TransactionType)\n</code></pre>"},{"location":"pages/Integracao/UICallback/","title":"UICallback","text":""},{"location":"pages/Integracao/UICallback/#uicallback","title":"UICallback","text":"<p>Interface que disponibiliza os callbacks de intera\u00e7\u00e3o com o usu\u00e1rio, respons\u00e1vel por  gerenciar o comportamento e orquestrar a captura dos dados necess\u00e1rios para  processar uma transa\u00e7\u00e3o.</p> <p>Para inicializar o MobileSDK, \u00e9 necess\u00e1rio ter uma inst\u00e2ncia de UICallback. Sendo assim,  nossa sugest\u00e3o \u00e9 criar uma Activity que se responsabilize pelo fluxo de integra\u00e7\u00e3o e  implemente essa interface (verifique nosso App de exemplo). </p> <p>Abaixo, temos uma lista dos m\u00e9todos definidos pela interface e informa\u00e7\u00f5es que  devemos utilizar para compreender qual o comportamento esperado pelo SDK, durante  o processo transacional.</p>"},{"location":"pages/Integracao/UICallback/#onbeep","title":"onBeep()","text":"<p>Deve emitir um feedback sonoro, quando suportado.</p>"},{"location":"pages/Integracao/UICallback/#onclean","title":"onClean()","text":"<p>Os componente utilizados para exibir mensagens e capturar dados ao usu\u00e1rio, devem  ser \u201cresetados\u201d. Ou seja, devem ter seus status iniciais restaurados.</p>"},{"location":"pages/Integracao/UICallback/#onshowerrorstring-message","title":"onShowError(String message)","text":"<p>Utilizado para exibir uma mensagem de erro ao usu\u00e1rio. O App deve definir a melhor  forma para tratar o callback. Contudo, a mensagem deve ser exibida de uma forma que  permita ao usu\u00e1rio identificar que se trata de uma mensagem de erro.</p> <p>Para auxiliar na visualiza\u00e7\u00e3o da mensagem, aplicar uma sleep de 2 segundos, ap\u00f3s  exibi\u00e7\u00e3o da mensagem.</p>"},{"location":"pages/Integracao/UICallback/#onshowmessagestring-message","title":"onShowMessage(String message)","text":"<p>Deve exibir a mensagem ao usu\u00e1rio, da forma como ela \u00e9 notificada. Esse callback \u00e9  utilizado para apresentar mensagens gerais ao usu\u00e1rio, por exemplo, Aguarde,  Solicitando autoriza\u00e7\u00e3o, exibir mensagens enviadas pelo autorizador, etc</p>"},{"location":"pages/Integracao/UICallback/#onrequestconfirmationstring-message","title":"onRequestConfirmation(String message)","text":"<p>Deve exibir a mensagem e solicitar confirma\u00e7\u00e3o ao usu\u00e1rio. Pode ser utilizado para  confirmar a inten\u00e7\u00e3o de cancelar a execu\u00e7\u00e3o da transa\u00e7\u00e3o, por exemplo.</p>"},{"location":"pages/Integracao/UICallback/#onshowalertstring-message","title":"onShowAlert(String message)","text":"<p>Deve exibir a mensagem ao usu\u00e1rio, de prefer\u00eancia, de forma destacada, para enfatizar  que se trata de uma mensagem de aten\u00e7\u00e3o.</p> <p>Atualmente, esta fun\u00e7\u00e3o e\u0301 utilizada no momento de se desfazer uma transa\u00e7\u00e3o, onde e\u0301 apresentada uma mensagem indicando que a transa\u00e7\u00e3o foi desfeita e o cupom deve ser  retido. Por ser uma situa\u00e7\u00e3o importante, e\u0301 necess\u00e1rio a confirma\u00e7\u00e3o de leitura pelo  operador, mesmo que o callback n\u00e3o exija uma resposta.</p>"},{"location":"pages/Integracao/UICallback/#oninputinputmodel-inputmodel-result-result","title":"onInput(InputModel inputModel, Result result)","text":"<p>Deve exibir ao usu\u00e1rio um componente para entrada de dados, respeitando as regras e  defini\u00e7\u00e3o do InputModel. </p>"},{"location":"pages/Integracao/UICallback/#onshowmenustring-label-list-items-int-selectedoption-menuresult-menuresult","title":"onShowMenu(String label, List items, int selectedOption, MenuResult menuResult) <p>Deve exibir um componente de sele\u00e7\u00e3o, onde o usu\u00e1rio ter\u00e1 a possibilidade de  selecionar uma das op\u00e7\u00f5es apresentadas ou cancelar a opera\u00e7\u00e3o.</p>","text":""},{"location":"pages/Integracao/UICallback/#onmaskinputboolean-clean-string-label-string-mask-string-defaultvalue-boolean-enterkey-result-result","title":"onMaskInput(boolean clean, String label, String mask, String defaultValue, boolean enterKey, Result result) <p>Deve solicitar ao usu\u00e1rio a entrada de um dado, utilizando a m\u00e1scara de edi\u00e7\u00e3o  informada nos par\u00e2metros do callback. Dessa forma, \u00e9 responsabilidade do App  interpretar a m\u00e1scara e formatar para o usu\u00e1rio.</p>  <p>Observa\u00e7\u00e3o</p> <p>A m\u00e1scara deve ser omitida na resposta. </p>   <p>Exemplo</p> <p>10/20, deve ser respondida como 1020. </p>","text":""},{"location":"pages/Integracao/UICallback/#getcanceledstatus","title":"getCanceledStatus() <p>Deve informar que o usu\u00e1rio sinalizou a inten\u00e7\u00e3o de abortar a opera\u00e7\u00e3o. Normalmente  esse callback \u00e9 chamado em opera\u00e7\u00f5es de pinpad, ou seja, quando a aplica\u00e7\u00e3o est\u00e1 no  fluxo de pagamento, interagindo com o usu\u00e1rio atrav\u00e9s do DTEFMobile para capturar  dados do cart\u00e3o. </p>  <p>Exemplo</p> <p>Leitura do cart\u00e3o, captura de senha.</p>","text":""},{"location":"pages/Integracao/UICallback/#setcanceledboolean-canceled","title":"setCanceled(boolean canceled) <p>Permite que o usu\u00e1rio sinalize que deseja abortar uma opera\u00e7\u00e3o que ocorre de forma  paralela ao fluxo de UI. </p> <p>Esse callback funciona de forma complementar ao getCanceledStatus(). Para indicar que  o fluxo deve ser abortado, o App deve informar valor true.</p>","text":""},{"location":"pages/Integracao/UICallback/#onshowqrcodestring-message-string-qrcode-list-tags","title":"onShowQRCode(String message, String qrCode, List tags) <p>Deve exibir o qrCode para o usu\u00e1rio e aguardar at\u00e9 o pr\u00f3ximo comando de callback.  Normalmente, utilizado no fluxo de pagamento com QrLinx/PIX, onde a lista de tags,  pode ser retornada com informa\u00e7\u00f5es associadas ao QrCode apresentado. </p>  <p>Observa\u00e7\u00e3o</p> <p>No caso do fluxo de QrLinx/PIX, a lista de tags ir\u00e1 informar o nome das carteiras  de Wallet que podem finalizar (pagar) o QrCode</p>","text":""},{"location":"pages/Integracao/UICallback/#void-setcurrenttransactioninfoint-code-string-valueadicionado-na-v2734","title":"void setCurrentTransactionInfo(int code, String value)<p>Adicionado na v2.7.3.4</p> <p>Esse callback permite passar para a automa\u00e7\u00e3o informa\u00e7\u00e3o relacionada \u00e0 transa\u00e7\u00e3o corrente.</p>    Par\u00e2metro Descri\u00e7\u00e3o     code c\u00f3digo da informa\u00e7\u00e3o passada para a automa\u00e7\u00e3o   value valor da informa\u00e7\u00e3o passada para a automa\u00e7\u00e3o    <p>Os c\u00f3digos das informa\u00e7\u00f5es constam na tabela a seguir:</p>    Informa\u00e7\u00e3o C\u00f3digo     C\u00f3digo da rede autorizadora 25   Campos n\u00e3o utilizados na transa\u00e7\u00e3o de Frota (formato JSON)[EM DESENVOLVIMENTO] 456   Link de pagamento na Transa\u00e7\u00e3o com QR Code [EM DESENVOLVIMENTO] 1336     Clique aqui para expandir e mostrar exemplos","text":""},{"location":"pages/Integracao/UICallback/#code-25","title":"code = 25","text":"<p>Para a rede Stone o c\u00f3digo \u00e9 127. Assim, nesta callback a automa\u00e7\u00e3o deve receber code = 25 e value = \"127\", indicando que a transa\u00e7\u00e3o ser\u00e1 autorizada pela rede Stone.</p>"},{"location":"pages/Integracao/UICallback/#code-456-em-desenvolvimento","title":"code = 456 [EM DESENVOLVIMENTO]","text":"<p>Quando a automa\u00e7\u00e3o enviar na transa\u00e7\u00e3o de Frota produtos que n\u00e3o forem utilizados (devido \u00e0s regras da adquirente), retorna-se nesta callback code = 456 e value sendo uma String em formato JSON, conforme a estrutura a seguir: \"nao_utilizados\" : [{\"cod\":\"string\", \"quantidade\":\"double\", \"valorTotal\": \"double\"}].</p>"},{"location":"pages/Integracao/UICallback/#code-1336-em-desenvolvimento","title":"code = 1336 [EM DESENVOLVIMENTO]","text":"<p>Ao realizar uma Transa\u00e7\u00e3o com QR Code via a rede QRLinx, a automa\u00e7\u00e3o deve receber nesta callback code = 1336 e value sendo uma String contendo um link de pagamento. Este link pode ser disponibilizado ao cliente final via whatsapp, e-mail, SMS ou de alguma outra forma, permitindo assim disponibilizar mais um canal de pagamento para seu cliente.</p>"}]}